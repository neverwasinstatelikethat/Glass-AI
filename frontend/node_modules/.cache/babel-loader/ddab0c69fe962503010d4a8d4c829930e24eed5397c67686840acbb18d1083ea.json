{"ast":null,"code":"/**\n * Pipeline API Service - Handles all new backend endpoints for Phases 5-8\n * Explainability, Metrics, Autonomy, Features, and Continual Learning\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Generic fetch function with error handling\nconst apiFetch = async (endpoint, options = {}) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers\n      }\n    });\n    if (!response.ok) {\n      throw new Error(`API request failed with status ${response.status}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error(`Error fetching from ${endpoint}:`, error);\n    throw error;\n  }\n};\n\n// ==================== PHASE 6: EXPLAINABILITY API ====================\n\nexport const explainabilityApi = {\n  // Get explanation for latest prediction\n  getPredictionExplanation: async (modelName = 'lstm') => {\n    return await apiFetch(`/api/explainability/prediction?model_name=${modelName}`);\n  }\n};\n\n// ==================== PHASE 7: METRICS API ====================\n\nexport const metricsApi = {\n  // Get pipeline performance metrics\n  getPipelineMetrics: async () => {\n    return await apiFetch('/api/pipeline/metrics');\n  }\n};\n\n// ==================== FEATURES API ====================\n\nexport const featuresApi = {\n  // Get latest engineered features\n  getLatestFeatures: async () => {\n    return await apiFetch('/api/features/latest');\n  }\n};\n\n// ==================== PHASE 5: AUTONOMY API ====================\n\nexport const autonomyApi = {\n  // Get autonomous action decision status\n  getAutonomyStatus: async () => {\n    return await apiFetch('/api/autonomy/status');\n  }\n};\n\n// ==================== PIPELINE PROCESSING API ====================\n\nexport const pipelineApi = {\n  // Process sensor data through complete pipeline\n  processSensorData: async sensorData => {\n    return await apiFetch('/api/pipeline/process', {\n      method: 'POST',\n      body: JSON.stringify(sensorData)\n    });\n  }\n};\n\n// ==================== PHASE 8: CONTINUAL LEARNING API ====================\n\nexport const trainingApi = {\n  // Get continual learning training status\n  getTrainingStatus: async () => {\n    return await apiFetch('/api/training/status');\n  }\n};\n\n// ==================== COMBINED API EXPORTS ====================\n\nexport const pipelineApis = {\n  explainability: explainabilityApi,\n  metrics: metricsApi,\n  features: featuresApi,\n  autonomy: autonomyApi,\n  pipeline: pipelineApi,\n  training: trainingApi\n};\nexport default pipelineApis;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiFetch","endpoint","options","response","fetch","headers","ok","Error","status","json","error","console","explainabilityApi","getPredictionExplanation","modelName","metricsApi","getPipelineMetrics","featuresApi","getLatestFeatures","autonomyApi","getAutonomyStatus","pipelineApi","processSensorData","sensorData","method","body","JSON","stringify","trainingApi","getTrainingStatus","pipelineApis","explainability","metrics","features","autonomy","pipeline","training"],"sources":["C:/Users/hehehe/Desktop/scripts/glass_ai/frontend/src/services/pipelineApi.ts"],"sourcesContent":["/**\n * Pipeline API Service - Handles all new backend endpoints for Phases 5-8\n * Explainability, Metrics, Autonomy, Features, and Continual Learning\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Generic fetch function with error handling\nconst apiFetch = async (endpoint: string, options: RequestInit = {}) => {\n  try {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    });\n    \n    if (!response.ok) {\n      throw new Error(`API request failed with status ${response.status}`);\n    }\n    \n    return await response.json();\n  } catch (error) {\n    console.error(`Error fetching from ${endpoint}:`, error);\n    throw error;\n  }\n};\n\n// ==================== PHASE 6: EXPLAINABILITY API ====================\n\nexport interface FeatureAttribution {\n  feature_name: string;\n  importance: number;\n  value: number;\n}\n\nexport interface ExplanationData {\n  timestamp: string;\n  model_name: string;\n  explanations: {\n    shap_values?: FeatureAttribution[];\n    lime_explanation?: any;\n    top_features?: FeatureAttribution[];\n  };\n}\n\nexport const explainabilityApi = {\n  // Get explanation for latest prediction\n  getPredictionExplanation: async (modelName: string = 'lstm'): Promise<ExplanationData> => {\n    return await apiFetch(`/api/explainability/prediction?model_name=${modelName}`);\n  },\n};\n\n// ==================== PHASE 7: METRICS API ====================\n\nexport interface PipelineMetrics {\n  pipeline_executions: number;\n  successful_predictions: number;\n  failed_predictions: number;\n  avg_latency_ms: number;\n  feature_extraction_time_ms: number;\n  prediction_time_ms: number;\n  explanation_time_ms: number;\n}\n\nexport interface MetricsResponse {\n  timestamp: string;\n  pipeline_metrics: PipelineMetrics;\n  system_metrics: any;\n}\n\nexport const metricsApi = {\n  // Get pipeline performance metrics\n  getPipelineMetrics: async (): Promise<MetricsResponse> => {\n    return await apiFetch('/api/pipeline/metrics');\n  },\n};\n\n// ==================== FEATURES API ====================\n\nexport interface EngineeredFeatures {\n  timestamp: string;\n  features: {\n    // Domain features\n    furnace_temperature?: number;\n    melt_level?: number;\n    belt_speed?: number;\n    mold_temp?: number;\n    pressure?: number;\n    humidity?: number;\n    viscosity?: number;\n    conveyor_speed?: number;\n    annealing_temp?: number;\n    quality_score?: number;\n    \n    // Statistical features\n    temperature_mean?: number;\n    temperature_std?: number;\n    temperature_trend?: number;\n    \n    // Real-time features\n    [key: string]: any;\n  };\n}\n\nexport const featuresApi = {\n  // Get latest engineered features\n  getLatestFeatures: async (): Promise<EngineeredFeatures> => {\n    return await apiFetch('/api/features/latest');\n  },\n};\n\n// ==================== PHASE 5: AUTONOMY API ====================\n\nexport interface AutonomousAction {\n  action: string;\n  confidence: number;\n  risk_level: 'LOW' | 'MEDIUM' | 'HIGH';\n  expected_impact: string;\n}\n\nexport interface AutonomyStatus {\n  timestamp: string;\n  autonomy_enabled: boolean;\n  autonomous_actions_count: number;\n  approval_required_count: number;\n  safety_checks_enabled: boolean;\n  actions_to_execute?: AutonomousAction[];\n  actions_requiring_approval?: AutonomousAction[];\n}\n\nexport const autonomyApi = {\n  // Get autonomous action decision status\n  getAutonomyStatus: async (): Promise<AutonomyStatus> => {\n    return await apiFetch('/api/autonomy/status');\n  },\n};\n\n// ==================== PIPELINE PROCESSING API ====================\n\nexport interface SensorData {\n  production_line?: string;\n  furnace_temperature?: number;\n  belt_speed?: number;\n  mold_temp?: number;\n  [key: string]: any;\n}\n\nexport interface PipelineOutput {\n  timestamp: string;\n  sensor_data: SensorData;\n  engineered_features: any;\n  predictions: any;\n  explanations: any;\n  recommendations: any;\n  autonomous_actions: any;\n  performance_metrics: {\n    total_latency_ms: number;\n    feature_extraction_ms: number;\n    prediction_ms: number;\n    explanation_ms: number;\n  };\n}\n\nexport const pipelineApi = {\n  // Process sensor data through complete pipeline\n  processSensorData: async (sensorData: SensorData): Promise<PipelineOutput> => {\n    return await apiFetch('/api/pipeline/process', {\n      method: 'POST',\n      body: JSON.stringify(sensorData),\n    });\n  },\n};\n\n// ==================== PHASE 8: CONTINUAL LEARNING API ====================\n\nexport interface TrainingStatus {\n  timestamp: string;\n  continual_learning_enabled: boolean;\n  experience_buffer_size: number;\n  current_task?: number;\n  training_progress?: number;\n}\n\nexport const trainingApi = {\n  // Get continual learning training status\n  getTrainingStatus: async (): Promise<TrainingStatus> => {\n    return await apiFetch('/api/training/status');\n  },\n};\n\n// ==================== COMBINED API EXPORTS ====================\n\nexport const pipelineApis = {\n  explainability: explainabilityApi,\n  metrics: metricsApi,\n  features: featuresApi,\n  autonomy: autonomyApi,\n  pipeline: pipelineApi,\n  training: trainingApi,\n};\n\nexport default pipelineApis;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;;AAE7E;AACA,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,QAAgB,EAAEC,OAAoB,GAAG,CAAC,CAAC,KAAK;EACtE,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGR,YAAY,GAAGK,QAAQ,EAAE,EAAE;MACzD,GAAGC,OAAO;MACVG,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,GAAGH,OAAO,CAACG;MACb;IACF,CAAC,CAAC;IAEF,IAAI,CAACF,QAAQ,CAACG,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,kCAAkCJ,QAAQ,CAACK,MAAM,EAAE,CAAC;IACtE;IAEA,OAAO,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,uBAAuBT,QAAQ,GAAG,EAAES,KAAK,CAAC;IACxD,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;;AAkBA,OAAO,MAAME,iBAAiB,GAAG;EAC/B;EACAC,wBAAwB,EAAE,MAAAA,CAAOC,SAAiB,GAAG,MAAM,KAA+B;IACxF,OAAO,MAAMd,QAAQ,CAAC,6CAA6Cc,SAAS,EAAE,CAAC;EACjF;AACF,CAAC;;AAED;;AAkBA,OAAO,MAAMC,UAAU,GAAG;EACxB;EACAC,kBAAkB,EAAE,MAAAA,CAAA,KAAsC;IACxD,OAAO,MAAMhB,QAAQ,CAAC,uBAAuB,CAAC;EAChD;AACF,CAAC;;AAED;;AA2BA,OAAO,MAAMiB,WAAW,GAAG;EACzB;EACAC,iBAAiB,EAAE,MAAAA,CAAA,KAAyC;IAC1D,OAAO,MAAMlB,QAAQ,CAAC,sBAAsB,CAAC;EAC/C;AACF,CAAC;;AAED;;AAmBA,OAAO,MAAMmB,WAAW,GAAG;EACzB;EACAC,iBAAiB,EAAE,MAAAA,CAAA,KAAqC;IACtD,OAAO,MAAMpB,QAAQ,CAAC,sBAAsB,CAAC;EAC/C;AACF,CAAC;;AAED;;AA0BA,OAAO,MAAMqB,WAAW,GAAG;EACzB;EACAC,iBAAiB,EAAE,MAAOC,UAAsB,IAA8B;IAC5E,OAAO,MAAMvB,QAAQ,CAAC,uBAAuB,EAAE;MAC7CwB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,UAAU;IACjC,CAAC,CAAC;EACJ;AACF,CAAC;;AAED;;AAUA,OAAO,MAAMK,WAAW,GAAG;EACzB;EACAC,iBAAiB,EAAE,MAAAA,CAAA,KAAqC;IACtD,OAAO,MAAM7B,QAAQ,CAAC,sBAAsB,CAAC;EAC/C;AACF,CAAC;;AAED;;AAEA,OAAO,MAAM8B,YAAY,GAAG;EAC1BC,cAAc,EAAEnB,iBAAiB;EACjCoB,OAAO,EAAEjB,UAAU;EACnBkB,QAAQ,EAAEhB,WAAW;EACrBiB,QAAQ,EAAEf,WAAW;EACrBgB,QAAQ,EAAEd,WAAW;EACrBe,QAAQ,EAAER;AACZ,CAAC;AAED,eAAeE,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}