{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hehehe\\\\Desktop\\\\scripts\\\\glass_ai\\\\frontend\\\\src\\\\components\\\\ARVisualization.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { OrbitControls, PerspectiveCamera, Environment, Html } from '@react-three/drei';\nimport * as THREE from 'three';\nimport { Typography, Fab, IconButton, Slider, FormControl, InputLabel, Select, MenuItem, Checkbox, FormControlLabel, FormGroup, Paper } from '@mui/material';\nimport useWebSocket from '../hooks/useWebSocket';\nimport { systemApi } from '../services/api';\nimport { PlayArrow, Pause, RotateLeft, ZoomIn, ZoomOut, Visibility, VisibilityOff, Settings, Warning } from '@mui/icons-material';\n\n// Цветовая палитра РТУ МИРЭА\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MIREA_COLORS = {\n  primary: '#0066CC',\n  secondary: '#FF6B35',\n  success: '#00C853',\n  warning: '#FFA726',\n  error: '#EF5350',\n  info: '#29B6F6',\n  background: '#0A1929',\n  surfaceLight: '#2A3A4F',\n  text: '#FFFFFF'\n};\n\n// Types\n\n// Печь для стекла\nconst GlassFurnace = ({\n  temperature,\n  meltLevel,\n  defects,\n  showDefects\n}) => {\n  const getColor = temp => {\n    const normalized = Math.min(1, Math.max(0, (temp - 1400) / 200));\n    return new THREE.Color(Math.min(1, normalized * 2), Math.max(0, 1 - Math.abs(normalized - 0.5) * 2), Math.max(0, (1 - normalized) * 2));\n  };\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    position: [0, 0, 0],\n    children: [/*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: [0, 2, 0],\n      children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n        args: [4, 4, 4]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: getColor(temperature),\n        transparent: true,\n        opacity: 0.8,\n        emissive: getColor(temperature),\n        emissiveIntensity: 0.2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: [0, 0.5, 0],\n      children: [/*#__PURE__*/_jsxDEV(\"cylinderGeometry\", {\n        args: [1.5, 1.8, meltLevel * 0.5, 32]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: \"#ff9800\",\n        transparent: true,\n        opacity: 0.7\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), showDefects && defects.map((defect, index) => /*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: defect.position,\n      children: [/*#__PURE__*/_jsxDEV(\"sphereGeometry\", {\n        args: [defect.severity * 0.1, 16, 16]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: defect.type === 'bubble' ? '#00bcd4' : defect.type === 'crack' ? '#f44336' : '#ffeb3b',\n        emissive: defect.type === 'bubble' ? '#00bcd4' : defect.type === 'crack' ? '#f44336' : '#ffeb3b',\n        emissiveIntensity: 0.3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Html, {\n        distanceFactor: 10,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(0,0,0,0.7)',\n            padding: '4px 8px',\n            borderRadius: '4px',\n            color: 'white',\n            fontSize: '10px'\n          },\n          children: defect.type === 'bubble' ? 'Пузырь' : defect.type === 'crack' ? 'Трещина' : 'Скол'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n\n// Формовочная линия\n_c = GlassFurnace;\nconst FormingLine = ({\n  beltSpeed,\n  moldTemp,\n  showLabels\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    position: [6, 0, 0],\n    children: [/*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: [0, 0.5, 0],\n      rotation: [Math.PI / 2, 0, 0],\n      children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n        args: [8, 0.1, 2]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: \"#795548\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: [0, 1.5, 0],\n      children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n        args: [2, 2, 2]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: \"#607d8b\",\n        emissive: \"#607d8b\",\n        emissiveIntensity: moldTemp > 320 ? 0.2 : 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), showLabels && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Html, {\n        position: [0, 3, 0],\n        center: true,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(0,0,0,0.7)',\n            padding: '4px 8px',\n            borderRadius: '4px',\n            color: 'white'\n          },\n          children: [\"\\u0421\\u043A\\u043E\\u0440\\u043E\\u0441\\u0442\\u044C \\u043B\\u0435\\u043D\\u0442\\u044B: \", beltSpeed, \" \\u043C/\\u043C\\u0438\\u043D\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Html, {\n        position: [0, 2.5, 0],\n        center: true,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(0,0,0,0.7)',\n            padding: '4px 8px',\n            borderRadius: '4px',\n            color: 'white'\n          },\n          children: [\"\\u0422\\u0435\\u043C\\u043F\\u0435\\u0440\\u0430\\u0442\\u0443\\u0440\\u0430 \\u0444\\u043E\\u0440\\u043C\\u044B: \", moldTemp, \"\\xB0C\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n\n// Конвейерная система\n_c2 = FormingLine;\nconst ConveyorSystem = ({\n  speed,\n  showLabels\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    position: [-6, 0, 0],\n    children: [/*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: [0, 0.5, 0],\n      rotation: [Math.PI / 2, 0, 0],\n      children: [/*#__PURE__*/_jsxDEV(\"boxGeometry\", {\n        args: [8, 0.1, 2]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: \"#9e9e9e\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), [...Array(5)].map((_, i) => /*#__PURE__*/_jsxDEV(\"mesh\", {\n      position: [-3 + i * 1.5, 1, 0],\n      children: [/*#__PURE__*/_jsxDEV(\"cylinderGeometry\", {\n        args: [0.3, 0.3, 2, 32]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        color: \"#616161\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this)), showLabels && /*#__PURE__*/_jsxDEV(Html, {\n      position: [0, 2, 0],\n      center: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'rgba(0,0,0,0.7)',\n          padding: '4px 8px',\n          borderRadius: '4px',\n          color: 'white'\n        },\n        children: [\"\\u0421\\u043A\\u043E\\u0440\\u043E\\u0441\\u0442\\u044C \\u043A\\u043E\\u043D\\u0432\\u0435\\u0439\\u0435\\u0440\\u0430: \", speed, \" \\u043C/\\u043C\\u0438\\u043D\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 5\n  }, this);\n};\n\n// Главная 3D сцена\n_c3 = ConveyorSystem;\nconst GlassProductionScene = ({\n  sensorData,\n  showDefects,\n  showLabels\n}) => {\n  const generateDefects = () => {\n    const defects = [];\n    Object.entries(sensorData.defects).forEach(([type, count]) => {\n      for (let i = 0; i < count; i++) {\n        defects.push({\n          position: [(Math.random() - 0.5) * 3, 2 + Math.random() * 2, (Math.random() - 0.5) * 3],\n          type,\n          severity: Math.random()\n        });\n      }\n    });\n    return defects;\n  };\n  const defects = generateDefects();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"ambientLight\", {\n      intensity: 0.5\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pointLight\", {\n      position: [10, 10, 10],\n      intensity: 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"spotLight\", {\n      position: [0, 10, 0],\n      angle: 0.3,\n      penumbra: 1,\n      intensity: 1,\n      castShadow: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GlassFurnace, {\n      temperature: sensorData.furnace.temperature,\n      meltLevel: sensorData.furnace.meltLevel,\n      defects: defects,\n      showDefects: showDefects\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormingLine, {\n      beltSpeed: sensorData.forming.beltSpeed,\n      moldTemp: sensorData.forming.moldTemp,\n      showLabels: showLabels\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConveyorSystem, {\n      speed: sensorData.forming.beltSpeed * 0.8,\n      showLabels: showLabels\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OrbitControls, {\n      enablePan: true,\n      enableZoom: true,\n      enableRotate: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PerspectiveCamera, {\n      makeDefault: true,\n      position: [0, 5, 15],\n      fov: 50\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Environment, {\n      preset: \"city\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n// AR наложение\n_c4 = GlassProductionScene;\nconst AROverlay = ({\n  sensorData,\n  defects,\n  showOverlay\n}) => {\n  var _sensorData$furnace, _sensorData$furnace$t, _sensorData$forming, _sensorData$forming$b;\n  if (!showOverlay) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      zIndex: 1000\n    },\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 4,\n      style: {\n        position: 'absolute',\n        top: '20%',\n        left: '10%',\n        background: 'rgba(0, 0, 0, 0.8)',\n        padding: '16px',\n        borderRadius: '8px',\n        border: `2px solid ${MIREA_COLORS.secondary}`\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        style: {\n          color: MIREA_COLORS.text\n        },\n        children: \"\\u041F\\u0435\\u0447\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        style: {\n          color: MIREA_COLORS.secondary,\n          fontWeight: 700\n        },\n        children: [((_sensorData$furnace = sensorData.furnace) === null || _sensorData$furnace === void 0 ? void 0 : (_sensorData$furnace$t = _sensorData$furnace.temperature) === null || _sensorData$furnace$t === void 0 ? void 0 : _sensorData$furnace$t.toFixed(0)) || 0, \"\\xB0C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 4,\n      style: {\n        position: 'absolute',\n        top: '20%',\n        right: '10%',\n        background: 'rgba(0, 0, 0, 0.8)',\n        padding: '16px',\n        borderRadius: '8px',\n        border: `2px solid ${MIREA_COLORS.success}`\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        style: {\n          color: MIREA_COLORS.text\n        },\n        children: \"\\u0424\\u043E\\u0440\\u043C\\u043E\\u0432\\u043E\\u0447\\u043D\\u0430\\u044F \\u043B\\u0438\\u043D\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        style: {\n          color: MIREA_COLORS.success,\n          fontWeight: 700\n        },\n        children: [((_sensorData$forming = sensorData.forming) === null || _sensorData$forming === void 0 ? void 0 : (_sensorData$forming$b = _sensorData$forming.beltSpeed) === null || _sensorData$forming$b === void 0 ? void 0 : _sensorData$forming$b.toFixed(0)) || 0, \" \\u043C/\\u043C\\u0438\\u043D\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this), Object.entries(defects).map(([type, count], index) => count > 5 && /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 4,\n      style: {\n        position: 'absolute',\n        bottom: `${20 + index * 15}%`,\n        left: '50%',\n        transform: 'translateX(-50%)',\n        background: 'rgba(255, 0, 0, 0.9)',\n        padding: '16px',\n        borderRadius: '8px',\n        border: `2px solid ${MIREA_COLORS.error}`,\n        display: 'flex',\n        alignItems: 'center',\n        gap: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Warning, {\n        style: {\n          color: MIREA_COLORS.text\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        style: {\n          color: MIREA_COLORS.text\n        },\n        children: [\"\\u041E\\u0431\\u043D\\u0430\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \", type === 'bubbles' ? 'пузырей' : type === 'cracks' ? 'трещин' : 'сколов', \": \", count]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 13\n      }, this)]\n    }, type, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 296,\n    columnNumber: 5\n  }, this);\n};\n\n// Панель управления\n_c5 = AROverlay;\nconst ControlPanel = ({\n  isPlaying,\n  onPlayPause,\n  onReset,\n  cameraMode,\n  onCameraModeChange,\n  zoomLevel,\n  onZoomChange,\n  showDefects,\n  onShowDefectsChange,\n  showLabels,\n  onShowLabelsChange\n}) => {\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 8,\n    style: {\n      position: 'absolute',\n      bottom: '20px',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      display: 'flex',\n      gap: '16px',\n      alignItems: 'center',\n      background: `linear-gradient(135deg, ${MIREA_COLORS.background}E6, ${MIREA_COLORS.surfaceLight}E6)`,\n      backdropFilter: 'blur(10px)',\n      padding: '16px',\n      borderRadius: '32px',\n      zIndex: 1001,\n      border: `1px solid ${MIREA_COLORS.primary}60`\n    },\n    children: [/*#__PURE__*/_jsxDEV(Fab, {\n      size: \"small\",\n      style: {\n        backgroundColor: isPlaying ? MIREA_COLORS.secondary : MIREA_COLORS.primary\n      },\n      onClick: onPlayPause,\n      children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(PlayArrow, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Fab, {\n      size: \"small\",\n      style: {\n        backgroundColor: MIREA_COLORS.surfaceLight\n      },\n      onClick: onReset,\n      children: /*#__PURE__*/_jsxDEV(RotateLeft, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: () => onZoomChange(Math.max(1, zoomLevel - 0.5)),\n      children: /*#__PURE__*/_jsxDEV(ZoomOut, {\n        style: {\n          color: MIREA_COLORS.text\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Slider, {\n        value: zoomLevel,\n        onChange: (_, value) => onZoomChange(value),\n        min: 1,\n        max: 3,\n        step: 0.1,\n        style: {\n          color: MIREA_COLORS.primary\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: () => onZoomChange(Math.min(3, zoomLevel + 0.5)),\n      children: /*#__PURE__*/_jsxDEV(ZoomIn, {\n        style: {\n          color: MIREA_COLORS.text\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minWidth: '120px',\n        marginRight: '16px'\n      },\n      children: /*#__PURE__*/_jsxDEV(FormControl, {\n        size: \"small\",\n        style: {\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          style: {\n            color: MIREA_COLORS.text\n          },\n          children: \"\\u041A\\u0430\\u043C\\u0435\\u0440\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: cameraMode,\n          label: \"\\u041A\\u0430\\u043C\\u0435\\u0440\\u0430\",\n          onChange: e => onCameraModeChange(e.target.value),\n          style: {\n            color: MIREA_COLORS.text\n          },\n          sx: {\n            '& .MuiOutlinedInput-notchedOutline': {\n              borderColor: MIREA_COLORS.primary\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"orbit\",\n            children: \"\\u041E\\u0440\\u0431\\u0438\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"fixed\",\n            children: \"\\u0424\\u0438\\u043A\\u0441\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043D\\u0430\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"follow\",\n            children: \"\\u0421\\u043B\\u0435\\u0434\\u044F\\u0449\\u0430\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n      row: true,\n      children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n        control: /*#__PURE__*/_jsxDEV(Checkbox, {\n          checked: showDefects,\n          onChange: e => onShowDefectsChange(e.target.checked),\n          style: {\n            color: MIREA_COLORS.text\n          },\n          sx: {\n            '&.Mui-checked': {\n              color: MIREA_COLORS.primary\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 13\n        }, this),\n        label: /*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            color: MIREA_COLORS.text\n          },\n          children: \"\\u0414\\u0435\\u0444\\u0435\\u043A\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n        control: /*#__PURE__*/_jsxDEV(Checkbox, {\n          checked: showLabels,\n          onChange: e => onShowLabelsChange(e.target.checked),\n          style: {\n            color: MIREA_COLORS.text\n          },\n          sx: {\n            '&.Mui-checked': {\n              color: MIREA_COLORS.primary\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this),\n        label: /*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            color: MIREA_COLORS.text\n          },\n          children: \"\\u041C\\u0435\\u0442\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 404,\n    columnNumber: 5\n  }, this);\n};\n\n// Главный компонент AR визуализации\n_c6 = ControlPanel;\nconst ARVisualization = () => {\n  _s();\n  const [sensorData, setSensorData] = useState({\n    furnace: {\n      temperature: 1520,\n      pressure: 2.5,\n      meltLevel: 2.4\n    },\n    forming: {\n      beltSpeed: 155,\n      moldTemp: 325,\n      coolingRate: 1.2\n    },\n    defects: {\n      bubbles: 12,\n      cracks: 8,\n      chips: 5\n    }\n  });\n  const [isPlaying, setIsPlaying] = useState(true);\n  const [cameraMode, setCameraMode] = useState('orbit');\n  const [zoomLevel, setZoomLevel] = useState(1);\n  const [showDefects, setShowDefects] = useState(true);\n  const [showLabels, setShowLabels] = useState(true);\n  const [showOverlay, setShowOverlay] = useState(true);\n\n  // Initialize WebSocket connection\n  const wsUrl = `${process.env.REACT_APP_WS_URL || 'ws://localhost:8000/ws'}`;\n  const {\n    isConnected,\n    sendMessage\n  } = useWebSocket(wsUrl, {\n    onMessage: data => {\n      // Handle real-time updates from WebSocket\n      if (data.type === 'sensor_update' && data.data) {\n        // Update sensor data with real values from backend\n        setSensorData(prev => {\n          var _data$data$sensors, _data$data$sensors2, _data$data$sensors3, _data$data$sensors4, _data$data$sensors5, _data$data$sensors6;\n          return {\n            ...prev,\n            furnace: {\n              ...prev.furnace,\n              temperature: ((_data$data$sensors = data.data.sensors) === null || _data$data$sensors === void 0 ? void 0 : _data$data$sensors.furnace_temperature) || prev.furnace.temperature,\n              pressure: ((_data$data$sensors2 = data.data.sensors) === null || _data$data$sensors2 === void 0 ? void 0 : _data$data$sensors2.furnace_pressure) || prev.furnace.pressure,\n              meltLevel: ((_data$data$sensors3 = data.data.sensors) === null || _data$data$sensors3 === void 0 ? void 0 : _data$data$sensors3.melt_level) || prev.furnace.meltLevel\n            },\n            forming: {\n              ...prev.forming,\n              beltSpeed: ((_data$data$sensors4 = data.data.sensors) === null || _data$data$sensors4 === void 0 ? void 0 : _data$data$sensors4.belt_speed) || prev.forming.beltSpeed,\n              moldTemp: ((_data$data$sensors5 = data.data.sensors) === null || _data$data$sensors5 === void 0 ? void 0 : _data$data$sensors5.mold_temperature) || prev.forming.moldTemp,\n              coolingRate: ((_data$data$sensors6 = data.data.sensors) === null || _data$data$sensors6 === void 0 ? void 0 : _data$data$sensors6.cooling_rate) || prev.forming.coolingRate\n            }\n          };\n        });\n      } else if (data.type === 'realtime_update' && data.data) {\n        // Handle general real-time updates\n        console.log('Real-time update received:', data.data);\n      }\n    },\n    onOpen: () => {\n      console.log('WebSocket connected to backend');\n      // Subscribe to updates when connection is established\n      sendMessage({\n        type: 'subscribe',\n        topics: ['sensors', 'realtime']\n      });\n    },\n    onClose: () => {\n      console.log('WebSocket disconnected from backend');\n    },\n    onError: error => {\n      console.error('WebSocket error:', error);\n    }\n  });\n\n  // Fetch initial data from backend API\n  useEffect(() => {\n    const fetchInitialData = async () => {\n      try {\n        // Try to get digital twin state for initial values\n        const digitalTwinData = await systemApi.getDigitalTwinState();\n        if (digitalTwinData.state) {\n          setSensorData(prev => ({\n            ...prev,\n            furnace: {\n              ...prev.furnace,\n              temperature: digitalTwinData.state.furnace_temperature || prev.furnace.temperature,\n              meltLevel: digitalTwinData.state.melt_level / 1000 || prev.furnace.meltLevel // Convert units\n            },\n            forming: {\n              ...prev.forming,\n              beltSpeed: digitalTwinData.state.forming_belt_speed || prev.forming.beltSpeed\n            }\n          }));\n        }\n      } catch (error) {\n        console.error('Error fetching initial data:', error);\n        // Continue with default values\n      }\n    };\n    fetchInitialData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100%',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Canvas, {\n      camera: {\n        position: [0, 5, 15],\n        fov: 50\n      },\n      style: {\n        background: `linear-gradient(to bottom, ${MIREA_COLORS.background}, ${MIREA_COLORS.surfaceLight})`\n      },\n      children: /*#__PURE__*/_jsxDEV(GlassProductionScene, {\n        sensorData: sensorData,\n        showDefects: showDefects,\n        showLabels: showLabels\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AROverlay, {\n      sensorData: sensorData,\n      defects: sensorData.defects,\n      showOverlay: showOverlay\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ControlPanel, {\n      isPlaying: isPlaying,\n      onPlayPause: () => setIsPlaying(!isPlaying),\n      onReset: () => {\n        setSensorData({\n          furnace: {\n            temperature: 1520,\n            pressure: 2.5,\n            meltLevel: 2.4\n          },\n          forming: {\n            beltSpeed: 155,\n            moldTemp: 325,\n            coolingRate: 1.2\n          },\n          defects: {\n            bubbles: 12,\n            cracks: 8,\n            chips: 5\n          }\n        });\n      },\n      cameraMode: cameraMode,\n      onCameraModeChange: setCameraMode,\n      zoomLevel: zoomLevel,\n      onZoomChange: setZoomLevel,\n      showDefects: showDefects,\n      onShowDefectsChange: setShowDefects,\n      showLabels: showLabels,\n      onShowLabelsChange: setShowLabels\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Fab, {\n      size: \"small\",\n      style: {\n        position: 'absolute',\n        top: '20px',\n        right: '20px',\n        zIndex: 1001,\n        backgroundColor: showOverlay ? MIREA_COLORS.primary : MIREA_COLORS.surfaceLight\n      },\n      onClick: () => setShowOverlay(!showOverlay),\n      children: showOverlay ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 24\n      }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Fab, {\n      size: \"small\",\n      style: {\n        position: 'absolute',\n        top: '20px',\n        right: '80px',\n        zIndex: 1001,\n        backgroundColor: MIREA_COLORS.surfaceLight\n      },\n      children: /*#__PURE__*/_jsxDEV(Settings, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 681,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 617,\n    columnNumber: 5\n  }, this);\n};\n_s(ARVisualization, \"7DtC/E4cyRQaGY3411OUX4/fXtY=\", false, function () {\n  return [useWebSocket];\n});\n_c7 = ARVisualization;\nexport default ARVisualization;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"GlassFurnace\");\n$RefreshReg$(_c2, \"FormingLine\");\n$RefreshReg$(_c3, \"ConveyorSystem\");\n$RefreshReg$(_c4, \"GlassProductionScene\");\n$RefreshReg$(_c5, \"AROverlay\");\n$RefreshReg$(_c6, \"ControlPanel\");\n$RefreshReg$(_c7, \"ARVisualization\");","map":{"version":3,"names":["React","useState","useEffect","Canvas","OrbitControls","PerspectiveCamera","Environment","Html","THREE","Typography","Fab","IconButton","Slider","FormControl","InputLabel","Select","MenuItem","Checkbox","FormControlLabel","FormGroup","Paper","useWebSocket","systemApi","PlayArrow","Pause","RotateLeft","ZoomIn","ZoomOut","Visibility","VisibilityOff","Settings","Warning","jsxDEV","_jsxDEV","Fragment","_Fragment","MIREA_COLORS","primary","secondary","success","warning","error","info","background","surfaceLight","text","GlassFurnace","temperature","meltLevel","defects","showDefects","getColor","temp","normalized","Math","min","max","Color","abs","position","children","args","fileName","_jsxFileName","lineNumber","columnNumber","color","transparent","opacity","emissive","emissiveIntensity","map","defect","index","severity","type","distanceFactor","style","padding","borderRadius","fontSize","_c","FormingLine","beltSpeed","moldTemp","showLabels","rotation","PI","center","_c2","ConveyorSystem","speed","Array","_","i","_c3","GlassProductionScene","sensorData","generateDefects","Object","entries","forEach","count","push","random","intensity","angle","penumbra","castShadow","furnace","forming","enablePan","enableZoom","enableRotate","makeDefault","fov","preset","_c4","AROverlay","showOverlay","_sensorData$furnace","_sensorData$furnace$t","_sensorData$forming","_sensorData$forming$b","top","left","width","height","pointerEvents","zIndex","elevation","border","variant","fontWeight","toFixed","right","bottom","transform","display","alignItems","gap","_c5","ControlPanel","isPlaying","onPlayPause","onReset","cameraMode","onCameraModeChange","zoomLevel","onZoomChange","onShowDefectsChange","onShowLabelsChange","backdropFilter","size","backgroundColor","onClick","value","onChange","step","minWidth","marginRight","label","e","target","sx","borderColor","row","control","checked","_c6","ARVisualization","_s","setSensorData","pressure","coolingRate","bubbles","cracks","chips","setIsPlaying","setCameraMode","setZoomLevel","setShowDefects","setShowLabels","setShowOverlay","wsUrl","process","env","REACT_APP_WS_URL","isConnected","sendMessage","onMessage","data","prev","_data$data$sensors","_data$data$sensors2","_data$data$sensors3","_data$data$sensors4","_data$data$sensors5","_data$data$sensors6","sensors","furnace_temperature","furnace_pressure","melt_level","belt_speed","mold_temperature","cooling_rate","console","log","onOpen","topics","onClose","onError","fetchInitialData","digitalTwinData","getDigitalTwinState","state","forming_belt_speed","camera","_c7","$RefreshReg$"],"sources":["C:/Users/hehehe/Desktop/scripts/glass_ai/frontend/src/components/ARVisualization.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Canvas } from '@react-three/fiber';\r\nimport { OrbitControls, PerspectiveCamera, Environment, Html } from '@react-three/drei';\r\nimport * as THREE from 'three';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Fab, \r\n  IconButton, \r\n  Slider, \r\n  FormControl, \r\n  InputLabel, \r\n  Select, \r\n  MenuItem, \r\n  Checkbox, \r\n  FormControlLabel, \r\n  FormGroup,\r\n  Paper,\r\n  Chip\r\n} from '@mui/material';\r\nimport useWebSocket from '../hooks/useWebSocket';\r\nimport { systemApi } from '../services/api';\r\nimport { \r\n  PlayArrow, \r\n  Pause, \r\n  RotateLeft,\r\n  ZoomIn, \r\n  ZoomOut, \r\n  Visibility, \r\n  VisibilityOff,\r\n  Settings,\r\n  Warning,\r\n  Thermostat,\r\n  Speed\r\n} from '@mui/icons-material';\r\n\r\n// Цветовая палитра РТУ МИРЭА\r\nconst MIREA_COLORS = {\r\n  primary: '#0066CC',\r\n  secondary: '#FF6B35',\r\n  success: '#00C853',\r\n  warning: '#FFA726',\r\n  error: '#EF5350',\r\n  info: '#29B6F6',\r\n  background: '#0A1929',\r\n  surfaceLight: '#2A3A4F',\r\n  text: '#FFFFFF'\r\n};\r\n\r\n// Types\r\ninterface SensorData {\r\n  furnace: {\r\n    temperature: number;\r\n    pressure: number;\r\n    meltLevel: number;\r\n  };\r\n  forming: {\r\n    beltSpeed: number;\r\n    moldTemp: number;\r\n    coolingRate: number;\r\n  };\r\n  defects: Record<string, number>;\r\n}\r\n\r\ninterface DefectData {\r\n  position: [number, number, number];\r\n  type: string;\r\n  severity: number;\r\n}\r\n\r\n// Печь для стекла\r\nconst GlassFurnace: React.FC<{ \r\n  temperature: number; \r\n  meltLevel: number;\r\n  defects: DefectData[];\r\n  showDefects: boolean;\r\n}> = ({ temperature, meltLevel, defects, showDefects }) => {\r\n  const getColor = (temp: number) => {\r\n    const normalized = Math.min(1, Math.max(0, (temp - 1400) / 200));\r\n    return new THREE.Color(\r\n      Math.min(1, normalized * 2),\r\n      Math.max(0, 1 - Math.abs(normalized - 0.5) * 2),\r\n      Math.max(0, (1 - normalized) * 2)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <group position={[0, 0, 0]}>\r\n      <mesh position={[0, 2, 0]}>\r\n        <boxGeometry args={[4, 4, 4]} />\r\n        <meshStandardMaterial \r\n          color={getColor(temperature)} \r\n          transparent \r\n          opacity={0.8}\r\n          emissive={getColor(temperature)}\r\n          emissiveIntensity={0.2}\r\n        />\r\n      </mesh>\r\n      \r\n      <mesh position={[0, 0.5, 0]}>\r\n        <cylinderGeometry args={[1.5, 1.8, meltLevel * 0.5, 32]} />\r\n        <meshStandardMaterial \r\n          color=\"#ff9800\" \r\n          transparent \r\n          opacity={0.7}\r\n        />\r\n      </mesh>\r\n      \r\n      {showDefects && defects.map((defect, index) => (\r\n        <mesh key={index} position={defect.position}>\r\n          <sphereGeometry args={[defect.severity * 0.1, 16, 16]} />\r\n          <meshStandardMaterial \r\n            color={defect.type === 'bubble' ? '#00bcd4' : defect.type === 'crack' ? '#f44336' : '#ffeb3b'} \r\n            emissive={defect.type === 'bubble' ? '#00bcd4' : defect.type === 'crack' ? '#f44336' : '#ffeb3b'}\r\n            emissiveIntensity={0.3}\r\n          />\r\n          <Html distanceFactor={10}>\r\n            <div style={{ \r\n              background: 'rgba(0,0,0,0.7)', \r\n              padding: '4px 8px', \r\n              borderRadius: '4px',\r\n              color: 'white',\r\n              fontSize: '10px'\r\n            }}>\r\n              {defect.type === 'bubble' ? 'Пузырь' : defect.type === 'crack' ? 'Трещина' : 'Скол'}\r\n            </div>\r\n          </Html>\r\n        </mesh>\r\n      ))}\r\n    </group>\r\n  );\r\n};\r\n\r\n// Формовочная линия\r\nconst FormingLine: React.FC<{ \r\n  beltSpeed: number; \r\n  moldTemp: number;\r\n  showLabels: boolean;\r\n}> = ({ beltSpeed, moldTemp, showLabels }) => {\r\n  return (\r\n    <group position={[6, 0, 0]}>\r\n      <mesh position={[0, 0.5, 0]} rotation={[Math.PI / 2, 0, 0]}>\r\n        <boxGeometry args={[8, 0.1, 2]} />\r\n        <meshStandardMaterial color=\"#795548\" />\r\n      </mesh>\r\n      \r\n      <mesh position={[0, 1.5, 0]}>\r\n        <boxGeometry args={[2, 2, 2]} />\r\n        <meshStandardMaterial \r\n          color=\"#607d8b\" \r\n          emissive=\"#607d8b\"\r\n          emissiveIntensity={moldTemp > 320 ? 0.2 : 0}\r\n        />\r\n      </mesh>\r\n      \r\n      {showLabels && (\r\n        <>\r\n          <Html position={[0, 3, 0]} center>\r\n            <div style={{ \r\n              background: 'rgba(0,0,0,0.7)', \r\n              padding: '4px 8px', \r\n              borderRadius: '4px',\r\n              color: 'white'\r\n            }}>\r\n              Скорость ленты: {beltSpeed} м/мин\r\n            </div>\r\n          </Html>\r\n          <Html position={[0, 2.5, 0]} center>\r\n            <div style={{ \r\n              background: 'rgba(0,0,0,0.7)', \r\n              padding: '4px 8px', \r\n              borderRadius: '4px',\r\n              color: 'white'\r\n            }}>\r\n              Температура формы: {moldTemp}°C\r\n            </div>\r\n          </Html>\r\n        </>\r\n      )}\r\n    </group>\r\n  );\r\n};\r\n\r\n// Конвейерная система\r\nconst ConveyorSystem: React.FC<{ \r\n  speed: number;\r\n  showLabels: boolean;\r\n}> = ({ speed, showLabels }) => {\r\n  return (\r\n    <group position={[-6, 0, 0]}>\r\n      <mesh position={[0, 0.5, 0]} rotation={[Math.PI / 2, 0, 0]}>\r\n        <boxGeometry args={[8, 0.1, 2]} />\r\n        <meshStandardMaterial color=\"#9e9e9e\" />\r\n      </mesh>\r\n      \r\n      {[...Array(5)].map((_, i) => (\r\n        <mesh key={i} position={[-3 + i * 1.5, 1, 0]}>\r\n          <cylinderGeometry args={[0.3, 0.3, 2, 32]} />\r\n          <meshStandardMaterial color=\"#616161\" />\r\n        </mesh>\r\n      ))}\r\n      \r\n      {showLabels && (\r\n        <Html position={[0, 2, 0]} center>\r\n          <div style={{ \r\n            background: 'rgba(0,0,0,0.7)', \r\n            padding: '4px 8px', \r\n            borderRadius: '4px',\r\n            color: 'white'\r\n          }}>\r\n            Скорость конвейера: {speed} м/мин\r\n          </div>\r\n        </Html>\r\n      )}\r\n    </group>\r\n  );\r\n};\r\n\r\n// Главная 3D сцена\r\nconst GlassProductionScene: React.FC<{ \r\n  sensorData: SensorData;\r\n  showDefects: boolean;\r\n  showLabels: boolean;\r\n}> = ({ sensorData, showDefects, showLabels }) => {\r\n  const generateDefects = (): DefectData[] => {\r\n    const defects: DefectData[] = [];\r\n    Object.entries(sensorData.defects).forEach(([type, count]) => {\r\n      for (let i = 0; i < count; i++) {\r\n        defects.push({\r\n          position: [\r\n            (Math.random() - 0.5) * 3,\r\n            2 + Math.random() * 2,\r\n            (Math.random() - 0.5) * 3\r\n          ] as [number, number, number],\r\n          type,\r\n          severity: Math.random()\r\n        });\r\n      }\r\n    });\r\n    return defects;\r\n  };\r\n\r\n  const defects = generateDefects();\r\n\r\n  return (\r\n    <>\r\n      <ambientLight intensity={0.5} />\r\n      <pointLight position={[10, 10, 10]} intensity={1} />\r\n      <spotLight\r\n        position={[0, 10, 0]}\r\n        angle={0.3}\r\n        penumbra={1}\r\n        intensity={1}\r\n        castShadow\r\n      />\r\n      \r\n      <GlassFurnace \r\n        temperature={sensorData.furnace.temperature} \r\n        meltLevel={sensorData.furnace.meltLevel}\r\n        defects={defects}\r\n        showDefects={showDefects}\r\n      />\r\n      \r\n      <FormingLine \r\n        beltSpeed={sensorData.forming.beltSpeed} \r\n        moldTemp={sensorData.forming.moldTemp}\r\n        showLabels={showLabels}\r\n      />\r\n      \r\n      <ConveyorSystem \r\n        speed={sensorData.forming.beltSpeed * 0.8} \r\n        showLabels={showLabels}\r\n      />\r\n      \r\n      <OrbitControls \r\n        enablePan={true}\r\n        enableZoom={true}\r\n        enableRotate={true}\r\n      />\r\n      \r\n      <PerspectiveCamera makeDefault position={[0, 5, 15]} fov={50} />\r\n      <Environment preset=\"city\" />\r\n    </>\r\n  );\r\n};\r\n\r\n// AR наложение\r\nconst AROverlay: React.FC<{ \r\n  sensorData: SensorData; \r\n  defects: Record<string, number>; \r\n  showOverlay: boolean;\r\n}> = ({ sensorData, defects, showOverlay }) => {\r\n  if (!showOverlay) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100%',\r\n      height: '100%',\r\n      pointerEvents: 'none',\r\n      zIndex: 1000\r\n    }}>\r\n      <Paper\r\n        elevation={4}\r\n        style={{\r\n          position: 'absolute',\r\n          top: '20%',\r\n          left: '10%',\r\n          background: 'rgba(0, 0, 0, 0.8)',\r\n          padding: '16px',\r\n          borderRadius: '8px',\r\n          border: `2px solid ${MIREA_COLORS.secondary}`\r\n        }}\r\n      >\r\n        <Typography variant=\"body2\" style={{ color: MIREA_COLORS.text }}>\r\n          Печь\r\n        </Typography>\r\n        <Typography variant=\"h6\" style={{ color: MIREA_COLORS.secondary, fontWeight: 700 }}>\r\n          {sensorData.furnace?.temperature?.toFixed(0) || 0}°C\r\n        </Typography>\r\n      </Paper>\r\n\r\n      <Paper\r\n        elevation={4}\r\n        style={{\r\n          position: 'absolute',\r\n          top: '20%',\r\n          right: '10%',\r\n          background: 'rgba(0, 0, 0, 0.8)',\r\n          padding: '16px',\r\n          borderRadius: '8px',\r\n          border: `2px solid ${MIREA_COLORS.success}`\r\n        }}\r\n      >\r\n        <Typography variant=\"body2\" style={{ color: MIREA_COLORS.text }}>\r\n          Формовочная линия\r\n        </Typography>\r\n        <Typography variant=\"h6\" style={{ color: MIREA_COLORS.success, fontWeight: 700 }}>\r\n          {sensorData.forming?.beltSpeed?.toFixed(0) || 0} м/мин\r\n        </Typography>\r\n      </Paper>\r\n\r\n      {Object.entries(defects).map(([type, count], index) => (\r\n        count > 5 && (\r\n          <Paper\r\n            key={type}\r\n            elevation={4}\r\n            style={{\r\n              position: 'absolute',\r\n              bottom: `${20 + index * 15}%`,\r\n              left: '50%',\r\n              transform: 'translateX(-50%)',\r\n              background: 'rgba(255, 0, 0, 0.9)',\r\n              padding: '16px',\r\n              borderRadius: '8px',\r\n              border: `2px solid ${MIREA_COLORS.error}`,\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px'\r\n            }}\r\n          >\r\n            <Warning style={{ color: MIREA_COLORS.text }} />\r\n            <Typography variant=\"body2\" style={{ color: MIREA_COLORS.text }}>\r\n              Обнаружено {type === 'bubbles' ? 'пузырей' : type === 'cracks' ? 'трещин' : 'сколов'}: {count}\r\n            </Typography>\r\n          </Paper>\r\n        )\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Панель управления\r\ninterface ControlPanelProps {\r\n  isPlaying: boolean;\r\n  onPlayPause: () => void;\r\n  onReset: () => void;\r\n  cameraMode: string;\r\n  onCameraModeChange: (mode: string) => void;\r\n  zoomLevel: number;\r\n  onZoomChange: (zoom: number) => void;\r\n  showDefects: boolean;\r\n  onShowDefectsChange: (show: boolean) => void;\r\n  showLabels: boolean;\r\n  onShowLabelsChange: (show: boolean) => void;\r\n}\r\n\r\nconst ControlPanel: React.FC<ControlPanelProps> = ({ \r\n  isPlaying, \r\n  onPlayPause, \r\n  onReset,\r\n  cameraMode,\r\n  onCameraModeChange,\r\n  zoomLevel,\r\n  onZoomChange,\r\n  showDefects,\r\n  onShowDefectsChange,\r\n  showLabels,\r\n  onShowLabelsChange\r\n}) => {\r\n  return (\r\n    <Paper\r\n      elevation={8}\r\n      style={{\r\n        position: 'absolute', \r\n        bottom: '20px', \r\n        left: '50%', \r\n        transform: 'translateX(-50%)',\r\n        display: 'flex',\r\n        gap: '16px',\r\n        alignItems: 'center',\r\n        background: `linear-gradient(135deg, ${MIREA_COLORS.background}E6, ${MIREA_COLORS.surfaceLight}E6)`,\r\n        backdropFilter: 'blur(10px)',\r\n        padding: '16px',\r\n        borderRadius: '32px',\r\n        zIndex: 1001,\r\n        border: `1px solid ${MIREA_COLORS.primary}60`\r\n      }}\r\n    >\r\n      <Fab \r\n        size=\"small\" \r\n        style={{\r\n          backgroundColor: isPlaying ? MIREA_COLORS.secondary : MIREA_COLORS.primary,\r\n        }}\r\n        onClick={onPlayPause}\r\n      >\r\n        {isPlaying ? <Pause /> : <PlayArrow />}\r\n      </Fab>\r\n      \r\n      <Fab size=\"small\" style={{ backgroundColor: MIREA_COLORS.surfaceLight }} onClick={onReset}>\r\n        <RotateLeft />\r\n      </Fab>\r\n      \r\n      <IconButton onClick={() => onZoomChange(Math.max(1, zoomLevel - 0.5))}>\r\n        <ZoomOut style={{ color: MIREA_COLORS.text }} />\r\n      </IconButton>\r\n      \r\n      <div style={{ width: '100px' }}>\r\n        <Slider\r\n          value={zoomLevel}\r\n          onChange={(_, value) => onZoomChange(value as number)}\r\n          min={1}\r\n          max={3}\r\n          step={0.1}\r\n          style={{ \r\n            color: MIREA_COLORS.primary\r\n          }}\r\n        />\r\n      </div>\r\n      \r\n      <IconButton onClick={() => onZoomChange(Math.min(3, zoomLevel + 0.5))}>\r\n        <ZoomIn style={{ color: MIREA_COLORS.text }} />\r\n      </IconButton>\r\n      \r\n      <div style={{ minWidth: '120px', marginRight: '16px' }}>\r\n        <FormControl size=\"small\" style={{ width: '100%' }}>\r\n          <InputLabel style={{ color: MIREA_COLORS.text }}>Камера</InputLabel>\r\n          <Select\r\n            value={cameraMode}\r\n            label=\"Камера\"\r\n            onChange={(e) => onCameraModeChange(e.target.value as string)}\r\n            style={{\r\n              color: MIREA_COLORS.text,\r\n            }}\r\n            sx={{\r\n              '& .MuiOutlinedInput-notchedOutline': {\r\n                borderColor: MIREA_COLORS.primary\r\n              }\r\n            }}\r\n          >\r\n            <MenuItem value=\"orbit\">Орбита</MenuItem>\r\n            <MenuItem value=\"fixed\">Фиксированная</MenuItem>\r\n            <MenuItem value=\"follow\">Следящая</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </div>\r\n      \r\n      <FormGroup row>\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={showDefects}\r\n              onChange={(e) => onShowDefectsChange(e.target.checked)}\r\n              style={{\r\n                color: MIREA_COLORS.text,\r\n              }}\r\n              sx={{\r\n                '&.Mui-checked': {\r\n                  color: MIREA_COLORS.primary\r\n                }\r\n              }}\r\n            />\r\n          }\r\n          label={<Typography style={{ color: MIREA_COLORS.text }}>Дефекты</Typography>}\r\n        />\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={showLabels}\r\n              onChange={(e) => onShowLabelsChange(e.target.checked)}\r\n              style={{\r\n                color: MIREA_COLORS.text,\r\n              }}\r\n              sx={{\r\n                '&.Mui-checked': {\r\n                  color: MIREA_COLORS.primary\r\n                }\r\n              }}\r\n            />\r\n          }\r\n          label={<Typography style={{ color: MIREA_COLORS.text }}>Метки</Typography>}\r\n        />\r\n      </FormGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\n// Главный компонент AR визуализации\r\nconst ARVisualization: React.FC = () => {\r\n  const [sensorData, setSensorData] = useState<SensorData>({\r\n    furnace: {\r\n      temperature: 1520,\r\n      pressure: 2.5,\r\n      meltLevel: 2.4\r\n    },\r\n    forming: {\r\n      beltSpeed: 155,\r\n      moldTemp: 325,\r\n      coolingRate: 1.2\r\n    },\r\n    defects: {\r\n      bubbles: 12,\r\n      cracks: 8,\r\n      chips: 5\r\n    }\r\n  });\r\n  \r\n  const [isPlaying, setIsPlaying] = useState(true);\r\n  const [cameraMode, setCameraMode] = useState('orbit');\r\n  const [zoomLevel, setZoomLevel] = useState(1);\r\n  const [showDefects, setShowDefects] = useState(true);\r\n  const [showLabels, setShowLabels] = useState(true);\r\n  const [showOverlay, setShowOverlay] = useState(true);\r\n  \r\n  // Initialize WebSocket connection\r\n  const wsUrl = `${process.env.REACT_APP_WS_URL || 'ws://localhost:8000/ws'}`;\r\n  const { isConnected, sendMessage } = useWebSocket(wsUrl, {\r\n    onMessage: (data) => {\r\n      // Handle real-time updates from WebSocket\r\n      if (data.type === 'sensor_update' && data.data) {\r\n        // Update sensor data with real values from backend\r\n        setSensorData(prev => ({\r\n          ...prev,\r\n          furnace: {\r\n            ...prev.furnace,\r\n            temperature: data.data.sensors?.furnace_temperature || prev.furnace.temperature,\r\n            pressure: data.data.sensors?.furnace_pressure || prev.furnace.pressure,\r\n            meltLevel: data.data.sensors?.melt_level || prev.furnace.meltLevel\r\n          },\r\n          forming: {\r\n            ...prev.forming,\r\n            beltSpeed: data.data.sensors?.belt_speed || prev.forming.beltSpeed,\r\n            moldTemp: data.data.sensors?.mold_temperature || prev.forming.moldTemp,\r\n            coolingRate: data.data.sensors?.cooling_rate || prev.forming.coolingRate\r\n          }\r\n        }));\r\n      } else if (data.type === 'realtime_update' && data.data) {\r\n        // Handle general real-time updates\r\n        console.log('Real-time update received:', data.data);\r\n      }\r\n    },\r\n    onOpen: () => {\r\n      console.log('WebSocket connected to backend');\r\n      // Subscribe to updates when connection is established\r\n      sendMessage({ type: 'subscribe', topics: ['sensors', 'realtime'] });\r\n    },\r\n    onClose: () => {\r\n      console.log('WebSocket disconnected from backend');\r\n    },\r\n    onError: (error) => {\r\n      console.error('WebSocket error:', error);\r\n    }\r\n  });\r\n  \r\n  // Fetch initial data from backend API\r\n  useEffect(() => {\r\n    const fetchInitialData = async () => {\r\n      try {\r\n        // Try to get digital twin state for initial values\r\n        const digitalTwinData = await systemApi.getDigitalTwinState();\r\n        if (digitalTwinData.state) {\r\n          setSensorData(prev => ({\r\n            ...prev,\r\n            furnace: {\r\n              ...prev.furnace,\r\n              temperature: digitalTwinData.state.furnace_temperature || prev.furnace.temperature,\r\n              meltLevel: (digitalTwinData.state.melt_level / 1000) || prev.furnace.meltLevel // Convert units\r\n            },\r\n            forming: {\r\n              ...prev.forming,\r\n              beltSpeed: digitalTwinData.state.forming_belt_speed || prev.forming.beltSpeed,\r\n            }\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching initial data:', error);\r\n        // Continue with default values\r\n      }\r\n    };\r\n    \r\n    fetchInitialData();\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100%', position: 'relative' }}>\r\n      <Canvas\r\n        camera={{ position: [0, 5, 15], fov: 50 }}\r\n        style={{ background: `linear-gradient(to bottom, ${MIREA_COLORS.background}, ${MIREA_COLORS.surfaceLight})` }}\r\n      >\r\n        <GlassProductionScene \r\n          sensorData={sensorData}\r\n          showDefects={showDefects}\r\n          showLabels={showLabels}\r\n        />\r\n      </Canvas>\r\n      \r\n      <AROverlay \r\n        sensorData={sensorData}\r\n        defects={sensorData.defects}\r\n        showOverlay={showOverlay}\r\n      />\r\n      \r\n      <ControlPanel\r\n        isPlaying={isPlaying}\r\n        onPlayPause={() => setIsPlaying(!isPlaying)}\r\n        onReset={() => {\r\n          setSensorData({\r\n            furnace: {\r\n              temperature: 1520,\r\n              pressure: 2.5,\r\n              meltLevel: 2.4\r\n            },\r\n            forming: {\r\n              beltSpeed: 155,\r\n              moldTemp: 325,\r\n              coolingRate: 1.2\r\n            },\r\n            defects: {\r\n              bubbles: 12,\r\n              cracks: 8,\r\n              chips: 5\r\n            }\r\n          });\r\n        }}\r\n        cameraMode={cameraMode}\r\n        onCameraModeChange={setCameraMode}\r\n        zoomLevel={zoomLevel}\r\n        onZoomChange={setZoomLevel}\r\n        showDefects={showDefects}\r\n        onShowDefectsChange={setShowDefects}\r\n        showLabels={showLabels}\r\n        onShowLabelsChange={setShowLabels}\r\n      />\r\n      \r\n      <Fab \r\n        size=\"small\" \r\n        style={{\r\n          position: 'absolute', \r\n          top: '20px', \r\n          right: '20px',\r\n          zIndex: 1001,\r\n          backgroundColor: showOverlay ? MIREA_COLORS.primary : MIREA_COLORS.surfaceLight,\r\n        }}\r\n        onClick={() => setShowOverlay(!showOverlay)}\r\n      >\r\n        {showOverlay ? <VisibilityOff /> : <Visibility />}\r\n      </Fab>\r\n      \r\n      <Fab \r\n        size=\"small\" \r\n        style={{\r\n          position: 'absolute', \r\n          top: '20px', \r\n          right: '80px',\r\n          zIndex: 1001,\r\n          backgroundColor: MIREA_COLORS.surfaceLight\r\n        }}\r\n      >\r\n        <Settings />\r\n      </Fab>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ARVisualization;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}