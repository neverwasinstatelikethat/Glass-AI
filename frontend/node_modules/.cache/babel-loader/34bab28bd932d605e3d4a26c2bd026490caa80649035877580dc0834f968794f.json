{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hehehe\\\\Desktop\\\\scripts\\\\glass_ai\\\\frontend\\\\src\\\\components\\\\GraphVisualizationEnhanced.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Box, Typography, Drawer, IconButton, Chip, Button, alpha } from '@mui/material';\nimport Close from '@mui/icons-material/Close';\nimport { motion } from 'framer-motion';\n\n// Современная цветовая палитра РТУ МИРЭА 2025\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MIREA_2025_COLORS = {\n  primary: '#0066FF',\n  primaryGradient: 'linear-gradient(135deg, #0066FF 0%, #00E5FF 100%)',\n  primaryDark: '#0047B3',\n  primaryLight: '#4D8FFF',\n  secondary: '#FF3366',\n  secondaryGradient: 'linear-gradient(135deg, #FF3366 0%, #FF6B35 100%)',\n  secondaryDark: '#CC0033',\n  secondaryLight: '#FF6690',\n  success: '#00E676',\n  successGradient: 'linear-gradient(135deg, #00E676 0%, #00C853 100%)',\n  warning: '#FFD700',\n  warningGradient: 'linear-gradient(135deg, #FFD700 0%, #FFA726 100%)',\n  error: '#FF1744',\n  errorGradient: 'linear-gradient(135deg, #FF1744 0%, #EF5350 100%)',\n  info: '#00E5FF',\n  infoGradient: 'linear-gradient(135deg, #00E5FF 0%, #29B6F6 100%)',\n  background: '#000814',\n  backgroundGradient: 'radial-gradient(ellipse at top, #001D3D 0%, #000814 50%, #000000 100%)',\n  surface: 'rgba(13, 27, 42, 0.85)',\n  surfaceLight: 'rgba(0, 102, 255, 0.1)',\n  glass: 'rgba(255, 255, 255, 0.05)',\n  text: '#FFFFFF',\n  textSecondary: '#B8C5D6',\n  textTertiary: '#8A9BB0',\n  glowPrimary: 'rgba(0, 102, 255, 0.4)',\n  glowSecondary: 'rgba(255, 51, 102, 0.4)',\n  glowSuccess: 'rgba(0, 230, 118, 0.4)',\n  glowWarning: 'rgba(255, 215, 0, 0.4)'\n};\n\n// Define the GraphNode interface\n\n// Интерактивная визуализация графа с использованием force-directed layout\nconst GraphVisualization = ({\n  subgraph,\n  getConfidenceColor,\n  setSelectedNode,\n  setNodeDetailsOpen\n}) => {\n  _s();\n  const svgRef = useRef(null);\n  const [expandedNodes, setExpandedNodes] = useState(new Set());\n\n  // State for draggable nodes\n  const [positions, setPositions] = useState({});\n  const [draggingNodeId, setDraggingNodeId] = useState(null);\n\n  // Initialize positions when subgraph changes\n  useEffect(() => {\n    if (!(subgraph !== null && subgraph !== void 0 && subgraph.nodes)) return;\n    const initialPositions = {};\n    const centerX = 400;\n    const centerY = 250;\n    subgraph.nodes.forEach(node => {\n      // Place central defect node in the center\n      if (node.nodeType === 'defect') {\n        initialPositions[node.id] = {\n          x: centerX,\n          y: centerY\n        };\n      } else {\n        // Random placement for other nodes\n        initialPositions[node.id] = {\n          x: centerX + (Math.random() - 0.5) * 400,\n          y: centerY + (Math.random() - 0.5) * 300\n        };\n      }\n    });\n    setPositions(initialPositions);\n  }, [subgraph]);\n\n  // Apply force-directed layout\n  useEffect(() => {\n    if (!(subgraph !== null && subgraph !== void 0 && subgraph.nodes) || !(subgraph !== null && subgraph !== void 0 && subgraph.edges) || Object.keys(positions).length === 0) return;\n\n    // Create a copy of positions to work with\n    const newPos = {\n      ...positions\n    };\n    const nodes = [...subgraph.nodes];\n    const edges = [...subgraph.edges];\n\n    // Apply force simulation for better layout\n    for (let i = 0; i < 30; i++) {\n      // Apply repulsion forces between nodes\n      nodes.forEach(nodeA => {\n        nodes.forEach(nodeB => {\n          if (nodeA.id !== nodeB.id) {\n            const dx = newPos[nodeA.id].x - newPos[nodeB.id].x;\n            const dy = newPos[nodeA.id].y - newPos[nodeB.id].y;\n            const distance = Math.sqrt(dx * dx + dy * dy) || 0.01;\n            if (distance < 150) {\n              const force = 80 / (distance * distance);\n              newPos[nodeA.id].x += dx * force;\n              newPos[nodeA.id].y += dy * force;\n            }\n          }\n        });\n      });\n\n      // Apply attraction forces along edges\n      edges.forEach(edge => {\n        const sourcePos = newPos[edge.source];\n        const targetPos = newPos[edge.target];\n        if (sourcePos && targetPos) {\n          const dx = targetPos.x - sourcePos.x;\n          const dy = targetPos.y - sourcePos.y;\n          const distance = Math.sqrt(dx * dx + dy * dy) || 0.01;\n          if (distance > 80) {\n            const force = distance * 0.02;\n            newPos[edge.source].x += dx * force;\n            newPos[edge.source].y += dy * force;\n            newPos[edge.target].x -= dx * force;\n            newPos[edge.target].y -= dy * force;\n          }\n        }\n      });\n\n      // Keep nodes within bounds\n      nodes.forEach(node => {\n        newPos[node.id].x = Math.max(50, Math.min(750, newPos[node.id].x));\n        newPos[node.id].y = Math.max(50, Math.min(450, newPos[node.id].y));\n      });\n    }\n    setPositions(newPos);\n  }, [subgraph, positions]);\n\n  // Handle mouse events for dragging\n  const handleMouseDown = (nodeId, e) => {\n    e.stopPropagation();\n    setDraggingNodeId(nodeId);\n  };\n  const handleMouseMove = e => {\n    if (!draggingNodeId || !svgRef.current) return;\n    const svg = svgRef.current;\n    const rect = svg.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    setPositions(prev => ({\n      ...prev,\n      [draggingNodeId]: {\n        x,\n        y\n      }\n    }));\n  };\n  const handleMouseUp = () => {\n    setDraggingNodeId(null);\n  };\n\n  // Функция для переключения расширения узла\n  const toggleNodeExpansion = nodeId => {\n    setExpandedNodes(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  };\n\n  // Функция для обработки выбора узла\n  const handleNodeClick = node => {\n    setSelectedNode(node);\n    setNodeDetailsOpen(true);\n  };\n\n  // Render node details panel\n  const renderNodeDetails = () => {\n    if (!selectedNode) return null;\n    return /*#__PURE__*/_jsxDEV(Drawer, {\n      anchor: \"right\",\n      open: nodeDetailsOpen,\n      onClose: closeNodeDetails,\n      sx: {\n        '& .MuiDrawer-paper': {\n          background: 'rgba(13, 27, 42, 0.9)',\n          backdropFilter: 'blur(20px)',\n          border: '1px solid rgba(255, 255, 255, 0.1)',\n          width: 400,\n          padding: 3\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            color: MIREA_2025_COLORS.text,\n            fontWeight: 700\n          },\n          children: \"\\u0414\\u0435\\u0442\\u0430\\u043B\\u0438 \\u0443\\u0437\\u043B\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: closeNodeDetails,\n          sx: {\n            color: MIREA_2025_COLORS.text\n          },\n          children: /*#__PURE__*/_jsxDEV(Close, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          sx: {\n            color: MIREA_2025_COLORS.textSecondary,\n            mb: 1\n          },\n          children: \"\\u0422\\u0438\\u043F \\u0443\\u0437\\u043B\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n          label: selectedNode.nodeType,\n          sx: {\n            background: (() => {\n              switch (selectedNode.nodeType) {\n                case 'defect':\n                  return alpha(MIREA_2025_COLORS.error, 0.2);\n                case 'parameter':\n                  return alpha(MIREA_2025_COLORS.primary, 0.2);\n                case 'equipment':\n                  return alpha(MIREA_2025_COLORS.info, 0.2);\n                case 'cause':\n                  return alpha(MIREA_2025_COLORS.warning, 0.2);\n                case 'recommendation':\n                  return alpha(MIREA_2025_COLORS.success, 0.2);\n                default:\n                  return alpha(MIREA_2025_COLORS.secondary, 0.2);\n              }\n            })(),\n            color: 'primary',\n            fontWeight: 700\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          sx: {\n            color: MIREA_2025_COLORS.textSecondary,\n            mb: 1\n          },\n          children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          sx: {\n            color: MIREA_2025_COLORS.text,\n            fontWeight: 600\n          },\n          children: selectedNode.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          sx: {\n            color: MIREA_2025_COLORS.textSecondary,\n            mb: 1\n          },\n          children: \"\\u0423\\u0432\\u0435\\u0440\\u0435\\u043D\\u043D\\u043E\\u0441\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              flex: 1,\n              height: 8,\n              background: 'rgba(255, 255, 255, 0.1)',\n              borderRadius: 4\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                height: '100%',\n                width: `${(selectedNode.confidence || 0) * 100}%`,\n                background: getConfidenceColor(selectedNode.confidence || 0),\n                borderRadius: 4\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              color: MIREA_2025_COLORS.text,\n              fontWeight: 600,\n              minWidth: 40\n            },\n            children: [((selectedNode.confidence || 0) * 100).toFixed(0), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), selectedNode.properties && Object.keys(selectedNode.properties).length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          sx: {\n            color: MIREA_2025_COLORS.textSecondary,\n            mb: 1\n          },\n          children: \"\\u0421\\u0432\\u043E\\u0439\\u0441\\u0442\\u0432\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            background: 'rgba(255, 255, 255, 0.05)',\n            borderRadius: 2,\n            p: 2,\n            maxHeight: 200,\n            overflow: 'auto'\n          },\n          children: Object.entries(selectedNode.properties).map(([key, value]) => /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                color: MIREA_2025_COLORS.textSecondary\n              },\n              children: [key, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              sx: {\n                color: MIREA_2025_COLORS.text,\n                fontWeight: 500\n              },\n              children: String(value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        fullWidth: true,\n        onClick: () => toggleNodeExpansion(selectedNode.id.toString()),\n        sx: {\n          mt: 2,\n          borderColor: MIREA_2025_COLORS.primary,\n          color: MIREA_2025_COLORS.primary,\n          '&:hover': {\n            borderColor: MIREA_2025_COLORS.primaryLight,\n            background: alpha(MIREA_2025_COLORS.primary, 0.1)\n          }\n        },\n        children: [expandedNodes.has(selectedNode.id.toString()) ? 'Свернуть' : 'Развернуть', \" \\u0443\\u0437\\u0435\\u043B\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Render force-directed graph using SVG\n  const renderForceDirectedGraph = () => {\n    if (!(subgraph !== null && subgraph !== void 0 && subgraph.nodes) || !(subgraph !== null && subgraph !== void 0 && subgraph.edges) || Object.keys(positions).length === 0) return null;\n    const nodes = [...subgraph.nodes];\n    const edges = [...subgraph.edges];\n    return /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: \"100%\",\n      height: \"100%\",\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0\n      },\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      onMouseLeave: handleMouseUp,\n      children: [edges.map((edge, index) => {\n        const sourcePos = positions[edge.source];\n        const targetPos = positions[edge.target];\n        if (!sourcePos || !targetPos) return null;\n\n        // Calculate line properties based on edge strength\n        const strokeWidth = Math.max(1, edge.strength * 5);\n        const opacity = Math.max(0.3, edge.confidence);\n\n        // Arrow marker definition\n        const markerId = `arrowhead-${index}`;\n        return /*#__PURE__*/_jsxDEV(\"g\", {\n          children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n            children: /*#__PURE__*/_jsxDEV(\"marker\", {\n              id: markerId,\n              markerWidth: \"10\",\n              markerHeight: \"10\",\n              refX: \"9\",\n              refY: \"3\",\n              orient: \"auto\",\n              markerUnits: \"strokeWidth\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M0,0 L0,6 L9,3 z\",\n                fill: MIREA_2025_COLORS.primaryLight,\n                opacity: opacity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(motion.line, {\n            x1: sourcePos.x,\n            y1: sourcePos.y,\n            x2: targetPos.x,\n            y2: targetPos.y,\n            stroke: MIREA_2025_COLORS.primaryLight,\n            strokeWidth: strokeWidth,\n            opacity: opacity,\n            markerEnd: `url(#${markerId})`,\n            initial: {\n              pathLength: 0\n            },\n            animate: {\n              pathLength: 1\n            },\n            transition: {\n              duration: 1,\n              delay: index * 0.1\n            }\n          }, `edge-${index}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this)]\n        }, `edge-group-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this);\n      }), nodes.map((node, i) => {\n        const pos = positions[node.id];\n        if (!pos) return null;\n\n        // Node size based on confidence\n        const size = Math.max(30, 30 + (node.confidence || 0) * 30);\n\n        // Node color based on type\n        const getColor = () => {\n          switch (node.nodeType) {\n            case 'defect':\n              return MIREA_2025_COLORS.errorGradient;\n            case 'parameter':\n              return MIREA_2025_COLORS.primaryGradient;\n            case 'equipment':\n              return MIREA_2025_COLORS.infoGradient;\n            case 'cause':\n              return MIREA_2025_COLORS.warningGradient;\n            case 'recommendation':\n              return MIREA_2025_COLORS.successGradient;\n            default:\n              return MIREA_2025_COLORS.secondaryGradient;\n          }\n        };\n        const getBorderColor = () => {\n          switch (node.nodeType) {\n            case 'defect':\n              return MIREA_2025_COLORS.error;\n            case 'parameter':\n              return MIREA_2025_COLORS.primary;\n            case 'equipment':\n              return MIREA_2025_COLORS.info;\n            case 'cause':\n              return MIREA_2025_COLORS.warning;\n            case 'recommendation':\n              return MIREA_2025_COLORS.success;\n            default:\n              return MIREA_2025_COLORS.secondary;\n          }\n        };\n\n        // Check if node is expanded\n        const isExpanded = expandedNodes.has(node.id.toString());\n        return /*#__PURE__*/_jsxDEV(\"g\", {\n          children: [/*#__PURE__*/_jsxDEV(motion.circle, {\n            cx: pos.x,\n            cy: pos.y,\n            r: size / 2,\n            fill: getColor(),\n            stroke: getBorderColor(),\n            strokeWidth: \"2\",\n            style: {\n              cursor: draggingNodeId === node.id ? 'grabbing' : 'grab',\n              filter: `drop-shadow(0 0 10px ${getBorderColor()}80)`\n            },\n            animate: {\n              scale: [1, 1.1, 1],\n              filter: [`drop-shadow(0 0 5px ${getBorderColor()}40)`, `drop-shadow(0 0 15px ${getBorderColor()}60)`, `drop-shadow(0 0 5px ${getBorderColor()}40)`]\n            },\n            transition: {\n              duration: 2,\n              repeat: Infinity,\n              delay: i * 0.2\n            },\n            whileHover: {\n              scale: 1.3\n            },\n            onClick: () => handleNodeClick(node),\n            onMouseDown: e => handleMouseDown(node.id.toString(), e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n            cx: pos.x + size / 2 - 8,\n            cy: pos.y - size / 2 + 8,\n            r: \"8\",\n            fill: isExpanded ? MIREA_2025_COLORS.error : MIREA_2025_COLORS.success,\n            stroke: \"#FFFFFF\",\n            strokeWidth: \"1\",\n            style: {\n              cursor: 'pointer'\n            },\n            onClick: e => {\n              e.stopPropagation();\n              toggleNodeExpansion(node.id.toString());\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n            x: pos.x + size / 2 - 8,\n            y: pos.y - size / 2 + 12,\n            textAnchor: \"middle\",\n            fill: \"#FFFFFF\",\n            fontSize: \"10\",\n            fontWeight: \"bold\",\n            style: {\n              pointerEvents: 'none'\n            },\n            children: isExpanded ? '-' : '+'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n            x: pos.x,\n            y: pos.y + 5,\n            textAnchor: \"middle\",\n            fill: \"#FFFFFF\",\n            fontSize: Math.max(8, 12 - nodes.length * 0.1),\n            fontWeight: \"bold\",\n            style: {\n              pointerEvents: 'none',\n              textShadow: '1px 1px 2px rgba(0,0,0,0.7)'\n            },\n            children: node.label.substring(0, Math.max(3, Math.floor(size / 8)))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this)]\n        }, node.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      position: 'relative',\n      width: '100%',\n      height: 500,\n      overflow: 'hidden',\n      borderRadius: 4,\n      background: 'rgba(0, 0, 0, 0.2)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: `radial-gradient(circle at 30% 20%, ${alpha(MIREA_2025_COLORS.primary, 0.1)} 0%, transparent 50%),\n            radial-gradient(circle at 70% 80%, ${alpha(MIREA_2025_COLORS.secondary, 0.1)} 0%, transparent 50%)`,\n        animation: 'float 20s ease-in-out infinite',\n        '@keyframes float': {\n          '0%, 100%': {\n            transform: 'translate(0, 0)'\n          },\n          '50%': {\n            transform: 'translate(20px, 20px)'\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 7\n    }, this), renderForceDirectedGraph(), renderNodeDetails(), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'absolute',\n        bottom: 20,\n        left: 20,\n        background: 'rgba(0, 0, 0, 0.6)',\n        borderRadius: 2,\n        p: 2,\n        border: '1px solid rgba(255, 255, 255, 0.1)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        sx: {\n          color: MIREA_2025_COLORS.text,\n          fontWeight: 'bold',\n          mb: 1,\n          display: 'block'\n        },\n        children: \"\\u041B\\u0435\\u0433\\u0435\\u043D\\u0434\\u0430 \\u0443\\u0437\\u043B\\u043E\\u0432:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          gap: 2,\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: 12,\n              height: 12,\n              borderRadius: '50%',\n              background: MIREA_2025_COLORS.error\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              color: MIREA_2025_COLORS.textSecondary\n            },\n            children: \"\\u0414\\u0435\\u0444\\u0435\\u043A\\u0442\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: 12,\n              height: 12,\n              borderRadius: '30%',\n              background: MIREA_2025_COLORS.primary\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              color: MIREA_2025_COLORS.textSecondary\n            },\n            children: \"\\u041F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: 12,\n              height: 12,\n              borderRadius: '20%',\n              background: MIREA_2025_COLORS.info\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              color: MIREA_2025_COLORS.textSecondary\n            },\n            children: \"\\u041E\\u0431\\u043E\\u0440\\u0443\\u0434\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: 12,\n              height: 12,\n              borderRadius: '20%',\n              background: MIREA_2025_COLORS.warning\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              color: MIREA_2025_COLORS.textSecondary\n            },\n            children: \"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: 12,\n              height: 12,\n              borderRadius: '20%',\n              background: MIREA_2025_COLORS.success\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            sx: {\n              color: MIREA_2025_COLORS.textSecondary\n            },\n            children: \"\\u0420\\u0435\\u043A\\u043E\\u043C\\u0435\\u043D\\u0434\\u0430\\u0446\\u0438\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        position: 'absolute',\n        top: 20,\n        right: 20,\n        background: 'rgba(0, 0, 0, 0.6)',\n        borderRadius: 2,\n        p: 2,\n        border: '1px solid rgba(255, 255, 255, 0.1)',\n        maxWidth: 300\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        sx: {\n          color: MIREA_2025_COLORS.text,\n          fontWeight: 'bold',\n          mb: 1,\n          display: 'block'\n        },\n        children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        sx: {\n          color: MIREA_2025_COLORS.textSecondary,\n          display: 'block',\n          mb: 0.5\n        },\n        children: \"\\u2022 \\u041A\\u043B\\u0438\\u043A \\u043F\\u043E \\u0443\\u0437\\u043B\\u0443 - \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u0434\\u0435\\u0442\\u0430\\u043B\\u0435\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        sx: {\n          color: MIREA_2025_COLORS.textSecondary,\n          display: 'block',\n          mb: 0.5\n        },\n        children: \"\\u2022 \\u041A\\u043B\\u0438\\u043A \\u043F\\u043E +/- - \\u0440\\u0430\\u0437\\u0432\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C/\\u0441\\u0432\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        sx: {\n          color: MIREA_2025_COLORS.textSecondary,\n          display: 'block'\n        },\n        children: \"\\u2022 \\u041F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0441\\u043A\\u0438\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0443\\u0437\\u043B\\u043E\\u0432 \\u0434\\u043B\\u044F \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0440\\u0430\\u0441\\u043F\\u043E\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 526,\n    columnNumber: 5\n  }, this);\n};\n_s(GraphVisualization, \"No5soUA5N2/Jmwv3qLOWJW0bVQM=\");\n_c = GraphVisualization;\nexport default GraphVisualization;\nvar _c;\n$RefreshReg$(_c, \"GraphVisualization\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Typography","Drawer","IconButton","Chip","Button","alpha","Close","motion","jsxDEV","_jsxDEV","MIREA_2025_COLORS","primary","primaryGradient","primaryDark","primaryLight","secondary","secondaryGradient","secondaryDark","secondaryLight","success","successGradient","warning","warningGradient","error","errorGradient","info","infoGradient","background","backgroundGradient","surface","surfaceLight","glass","text","textSecondary","textTertiary","glowPrimary","glowSecondary","glowSuccess","glowWarning","GraphVisualization","subgraph","getConfidenceColor","setSelectedNode","setNodeDetailsOpen","_s","svgRef","expandedNodes","setExpandedNodes","Set","positions","setPositions","draggingNodeId","setDraggingNodeId","nodes","initialPositions","centerX","centerY","forEach","node","nodeType","id","x","y","Math","random","edges","Object","keys","length","newPos","i","nodeA","nodeB","dx","dy","distance","sqrt","force","edge","sourcePos","source","targetPos","target","max","min","handleMouseDown","nodeId","e","stopPropagation","handleMouseMove","current","svg","rect","getBoundingClientRect","clientX","left","clientY","top","prev","handleMouseUp","toggleNodeExpansion","newSet","has","delete","add","handleNodeClick","renderNodeDetails","selectedNode","anchor","open","nodeDetailsOpen","onClose","closeNodeDetails","sx","backdropFilter","border","width","padding","children","display","justifyContent","alignItems","mb","variant","color","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","onClick","label","gap","flex","height","borderRadius","confidence","minWidth","toFixed","properties","p","maxHeight","overflow","entries","map","key","value","String","fullWidth","toString","mt","borderColor","renderForceDirectedGraph","ref","style","position","onMouseMove","onMouseUp","onMouseLeave","index","strokeWidth","strength","opacity","markerId","markerWidth","markerHeight","refX","refY","orient","markerUnits","d","fill","line","x1","y1","x2","y2","stroke","markerEnd","initial","pathLength","animate","transition","duration","delay","pos","size","getColor","getBorderColor","isExpanded","circle","cx","cy","r","cursor","filter","scale","repeat","Infinity","whileHover","onMouseDown","textAnchor","fontSize","pointerEvents","textShadow","substring","floor","right","bottom","animation","transform","flexWrap","maxWidth","_c","$RefreshReg$"],"sources":["C:/Users/hehehe/Desktop/scripts/glass_ai/frontend/src/components/GraphVisualizationEnhanced.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Box, Typography, Drawer, IconButton, Chip, Button, alpha } from '@mui/material';\nimport Close from '@mui/icons-material/Close';\nimport { motion } from 'framer-motion';\n\n// Современная цветовая палитра РТУ МИРЭА 2025\nconst MIREA_2025_COLORS = {\n  primary: '#0066FF',\n  primaryGradient: 'linear-gradient(135deg, #0066FF 0%, #00E5FF 100%)',\n  primaryDark: '#0047B3',\n  primaryLight: '#4D8FFF',\n  secondary: '#FF3366',\n  secondaryGradient: 'linear-gradient(135deg, #FF3366 0%, #FF6B35 100%)',\n  secondaryDark: '#CC0033',\n  secondaryLight: '#FF6690',\n  success: '#00E676',\n  successGradient: 'linear-gradient(135deg, #00E676 0%, #00C853 100%)',\n  warning: '#FFD700',\n  warningGradient: 'linear-gradient(135deg, #FFD700 0%, #FFA726 100%)',\n  error: '#FF1744',\n  errorGradient: 'linear-gradient(135deg, #FF1744 0%, #EF5350 100%)',\n  info: '#00E5FF',\n  infoGradient: 'linear-gradient(135deg, #00E5FF 0%, #29B6F6 100%)',\n  background: '#000814',\n  backgroundGradient: 'radial-gradient(ellipse at top, #001D3D 0%, #000814 50%, #000000 100%)',\n  surface: 'rgba(13, 27, 42, 0.85)',\n  surfaceLight: 'rgba(0, 102, 255, 0.1)',\n  glass: 'rgba(255, 255, 255, 0.05)',\n  text: '#FFFFFF',\n  textSecondary: '#B8C5D6',\n  textTertiary: '#8A9BB0',\n  glowPrimary: 'rgba(0, 102, 255, 0.4)',\n  glowSecondary: 'rgba(255, 51, 102, 0.4)',\n  glowSuccess: 'rgba(0, 230, 118, 0.4)',\n  glowWarning: 'rgba(255, 215, 0, 0.4)'\n};\n\n// Define the GraphNode interface\ninterface GraphNode {\n  id: number | string;\n  name: string;\n  label: string;\n  nodeType: 'defect' | 'cause' | 'parameter' | 'recommendation' | 'human_decision' | 'equipment';\n  confidence: number;\n  properties?: Record<string, any>;\n  applied?: boolean;\n  source?: string;\n}\n\ninterface GraphEdge {\n  id: number;\n  source: number;\n  target: number;\n  type: string;\n  confidence: number;\n  strength: number;\n}\n\ninterface GraphData {\n  defect: string;\n  nodes: GraphNode[];\n  edges: GraphEdge[];\n}\n\ninterface GraphVisualizationProps {\n  subgraph: GraphData | null;\n  getConfidenceColor: (confidence: number) => string;\n  selectedNode: GraphNode | null;\n  nodeDetailsOpen: boolean;\n  setSelectedNode: (node: GraphNode | null) => void;\n  setNodeDetailsOpen: (open: boolean) => void;\n  closeNodeDetails: () => void;\n}\n\n// Интерактивная визуализация графа с использованием force-directed layout\nconst GraphVisualization: React.FC<GraphVisualizationProps> = ({ \n  subgraph, \n  getConfidenceColor,\n  setSelectedNode,\n  setNodeDetailsOpen\n}) => {\n  const svgRef = useRef<SVGSVGElement>(null);\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n  \n  // State for draggable nodes\n  const [positions, setPositions] = useState<Record<string, { x: number; y: number }>>({});\n  const [draggingNodeId, setDraggingNodeId] = useState<string | null>(null);\n  \n  // Initialize positions when subgraph changes\n  useEffect(() => {\n    if (!subgraph?.nodes) return;\n    \n    const initialPositions: Record<string, { x: number; y: number }> = {};\n    const centerX = 400;\n    const centerY = 250;\n    \n    subgraph.nodes.forEach(node => {\n      // Place central defect node in the center\n      if (node.nodeType === 'defect') {\n        initialPositions[node.id] = { x: centerX, y: centerY };\n      } else {\n        // Random placement for other nodes\n        initialPositions[node.id] = { \n          x: centerX + (Math.random() - 0.5) * 400, \n          y: centerY + (Math.random() - 0.5) * 300 \n        };\n      }\n    });\n    \n    setPositions(initialPositions);\n  }, [subgraph]);\n  \n  // Apply force-directed layout\n  useEffect(() => {\n    if (!subgraph?.nodes || !subgraph?.edges || Object.keys(positions).length === 0) return;\n    \n    // Create a copy of positions to work with\n    const newPos = { ...positions };\n    const nodes = [...subgraph.nodes];\n    const edges = [...subgraph.edges];\n    \n    // Apply force simulation for better layout\n    for (let i = 0; i < 30; i++) {\n      // Apply repulsion forces between nodes\n      nodes.forEach(nodeA => {\n        nodes.forEach(nodeB => {\n          if (nodeA.id !== nodeB.id) {\n            const dx = newPos[nodeA.id].x - newPos[nodeB.id].x;\n            const dy = newPos[nodeA.id].y - newPos[nodeB.id].y;\n            const distance = Math.sqrt(dx * dx + dy * dy) || 0.01;\n            \n            if (distance < 150) {\n              const force = 80 / (distance * distance);\n              newPos[nodeA.id].x += dx * force;\n              newPos[nodeA.id].y += dy * force;\n            }\n          }\n        });\n      });\n      \n      // Apply attraction forces along edges\n      edges.forEach(edge => {\n        const sourcePos = newPos[edge.source];\n        const targetPos = newPos[edge.target];\n        \n        if (sourcePos && targetPos) {\n          const dx = targetPos.x - sourcePos.x;\n          const dy = targetPos.y - sourcePos.y;\n          const distance = Math.sqrt(dx * dx + dy * dy) || 0.01;\n          \n          if (distance > 80) {\n            const force = distance * 0.02;\n            newPos[edge.source].x += dx * force;\n            newPos[edge.source].y += dy * force;\n            newPos[edge.target].x -= dx * force;\n            newPos[edge.target].y -= dy * force;\n          }\n        }\n      });\n      \n      // Keep nodes within bounds\n      nodes.forEach(node => {\n        newPos[node.id].x = Math.max(50, Math.min(750, newPos[node.id].x));\n        newPos[node.id].y = Math.max(50, Math.min(450, newPos[node.id].y));\n      });\n    }\n    \n    setPositions(newPos);\n  }, [subgraph, positions]);\n  \n  // Handle mouse events for dragging\n  const handleMouseDown = (nodeId: string, e: React.MouseEvent) => {\n    e.stopPropagation();\n    setDraggingNodeId(nodeId);\n  };\n  \n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!draggingNodeId || !svgRef.current) return;\n    \n    const svg = svgRef.current;\n    const rect = svg.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    \n    setPositions(prev => ({\n      ...prev,\n      [draggingNodeId]: { x, y }\n    }));\n  };\n  \n  const handleMouseUp = () => {\n    setDraggingNodeId(null);\n  };\n  \n  // Функция для переключения расширения узла\n  const toggleNodeExpansion = (nodeId: string) => {\n    setExpandedNodes(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  };\n  \n  // Функция для обработки выбора узла\n  const handleNodeClick = (node: GraphNode) => {\n    setSelectedNode(node);\n    setNodeDetailsOpen(true);\n  };\n  \n  // Render node details panel\n  const renderNodeDetails = () => {\n    if (!selectedNode) return null;\n    \n    return (\n      <Drawer\n        anchor=\"right\"\n        open={nodeDetailsOpen}\n        onClose={closeNodeDetails}\n        sx={{\n          '& .MuiDrawer-paper': {\n            background: 'rgba(13, 27, 42, 0.9)',\n            backdropFilter: 'blur(20px)',\n            border: '1px solid rgba(255, 255, 255, 0.1)',\n            width: 400,\n            padding: 3\n          }\n        }}\n      >\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n          <Typography variant=\"h6\" sx={{ color: MIREA_2025_COLORS.text, fontWeight: 700 }}>\n            Детали узла\n          </Typography>\n          <IconButton onClick={closeNodeDetails} sx={{ color: MIREA_2025_COLORS.text }}>\n            <Close />\n          </IconButton>\n        </Box>\n        \n        <Box sx={{ mb: 3 }}>\n          <Typography variant=\"subtitle2\" sx={{ color: MIREA_2025_COLORS.textSecondary, mb: 1 }}>\n            Тип узла\n          </Typography>\n          <Chip \n            label={selectedNode.nodeType}\n            sx={{\n              background: (() => {\n                switch (selectedNode.nodeType) {\n                  case 'defect': return alpha(MIREA_2025_COLORS.error, 0.2);\n                  case 'parameter': return alpha(MIREA_2025_COLORS.primary, 0.2);\n                  case 'equipment': return alpha(MIREA_2025_COLORS.info, 0.2);\n                  case 'cause': return alpha(MIREA_2025_COLORS.warning, 0.2);\n                  case 'recommendation': return alpha(MIREA_2025_COLORS.success, 0.2);\n                  default: return alpha(MIREA_2025_COLORS.secondary, 0.2);\n                }\n              })(),\n              color: 'primary',\n              fontWeight: 700\n            }}\n          />\n        </Box>\n        \n        <Box sx={{ mb: 3 }}>\n          <Typography variant=\"subtitle2\" sx={{ color: MIREA_2025_COLORS.textSecondary, mb: 1 }}>\n            Название\n          </Typography>\n          <Typography variant=\"body1\" sx={{ color: MIREA_2025_COLORS.text, fontWeight: 600 }}>\n            {selectedNode.label}\n          </Typography>\n        </Box>\n        \n        <Box sx={{ mb: 3 }}>\n          <Typography variant=\"subtitle2\" sx={{ color: MIREA_2025_COLORS.textSecondary, mb: 1 }}>\n            Уверенность\n          </Typography>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n            <Box sx={{ flex: 1, height: 8, background: 'rgba(255, 255, 255, 0.1)', borderRadius: 4 }}>\n              <Box \n                sx={{ \n                  height: '100%', \n                  width: `${(selectedNode.confidence || 0) * 100}%`,\n                  background: getConfidenceColor(selectedNode.confidence || 0),\n                  borderRadius: 4 \n                }} \n              />\n            </Box>\n            <Typography variant=\"body2\" sx={{ color: MIREA_2025_COLORS.text, fontWeight: 600, minWidth: 40 }}>\n              {((selectedNode.confidence || 0) * 100).toFixed(0)}%\n            </Typography>\n          </Box>\n        </Box>\n        \n        {selectedNode.properties && Object.keys(selectedNode.properties).length > 0 && (\n          <Box sx={{ mb: 3 }}>\n            <Typography variant=\"subtitle2\" sx={{ color: MIREA_2025_COLORS.textSecondary, mb: 1 }}>\n              Свойства\n            </Typography>\n            <Box sx={{ \n              background: 'rgba(255, 255, 255, 0.05)', \n              borderRadius: 2, \n              p: 2,\n              maxHeight: 200,\n              overflow: 'auto'\n            }}>\n              {Object.entries(selectedNode.properties).map(([key, value]) => (\n                <Box key={key} sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                  <Typography variant=\"body2\" sx={{ color: MIREA_2025_COLORS.textSecondary }}>\n                    {key}:\n                  </Typography>\n                  <Typography variant=\"body2\" sx={{ color: MIREA_2025_COLORS.text, fontWeight: 500 }}>\n                    {String(value)}\n                  </Typography>\n                </Box>\n              ))}\n            </Box>\n          </Box>\n        )}\n        \n        <Button \n          variant=\"outlined\" \n          fullWidth\n          onClick={() => toggleNodeExpansion(selectedNode.id.toString())}\n          sx={{ \n            mt: 2,\n            borderColor: MIREA_2025_COLORS.primary,\n            color: MIREA_2025_COLORS.primary,\n            '&:hover': {\n              borderColor: MIREA_2025_COLORS.primaryLight,\n              background: alpha(MIREA_2025_COLORS.primary, 0.1)\n            }\n          }}\n        >\n          {expandedNodes.has(selectedNode.id.toString()) ? 'Свернуть' : 'Развернуть'} узел\n        </Button>\n      </Drawer>\n    );\n  };\n  \n  // Render force-directed graph using SVG\n  const renderForceDirectedGraph = () => {\n    if (!subgraph?.nodes || !subgraph?.edges || Object.keys(positions).length === 0) return null;\n    \n    const nodes = [...subgraph.nodes];\n    const edges = [...subgraph.edges];\n    \n    return (\n      <svg \n        ref={svgRef}\n        width=\"100%\" \n        height=\"100%\" \n        style={{ position: 'absolute', top: 0, left: 0 }}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n      >\n        {/* Edges */}\n        {edges.map((edge, index) => {\n          const sourcePos = positions[edge.source];\n          const targetPos = positions[edge.target];\n          \n          if (!sourcePos || !targetPos) return null;\n          \n          // Calculate line properties based on edge strength\n          const strokeWidth = Math.max(1, edge.strength * 5);\n          const opacity = Math.max(0.3, edge.confidence);\n          \n          // Arrow marker definition\n          const markerId = `arrowhead-${index}`;\n          \n          return (\n            <g key={`edge-group-${index}`}>\n              <defs>\n                <marker\n                  id={markerId}\n                  markerWidth=\"10\"\n                  markerHeight=\"10\"\n                  refX=\"9\"\n                  refY=\"3\"\n                  orient=\"auto\"\n                  markerUnits=\"strokeWidth\"\n                >\n                  <path\n                    d=\"M0,0 L0,6 L9,3 z\"\n                    fill={MIREA_2025_COLORS.primaryLight}\n                    opacity={opacity}\n                  />\n                </marker>\n              </defs>\n              <motion.line\n                key={`edge-${index}`}\n                x1={sourcePos.x}\n                y1={sourcePos.y}\n                x2={targetPos.x}\n                y2={targetPos.y}\n                stroke={MIREA_2025_COLORS.primaryLight}\n                strokeWidth={strokeWidth}\n                opacity={opacity}\n                markerEnd={`url(#${markerId})`}\n                initial={{ pathLength: 0 }}\n                animate={{ pathLength: 1 }}\n                transition={{\n                  duration: 1,\n                  delay: index * 0.1\n                }}\n              />\n            </g>\n          );\n        })}\n        \n        {/* Nodes */}\n        {nodes.map((node, i) => {\n          const pos = positions[node.id];\n          if (!pos) return null;\n          \n          // Node size based on confidence\n          const size = Math.max(30, 30 + (node.confidence || 0) * 30);\n          \n          // Node color based on type\n          const getColor = () => {\n            switch (node.nodeType) {\n              case 'defect': return MIREA_2025_COLORS.errorGradient;\n              case 'parameter': return MIREA_2025_COLORS.primaryGradient;\n              case 'equipment': return MIREA_2025_COLORS.infoGradient;\n              case 'cause': return MIREA_2025_COLORS.warningGradient;\n              case 'recommendation': return MIREA_2025_COLORS.successGradient;\n              default: return MIREA_2025_COLORS.secondaryGradient;\n            }\n          };\n          \n          const getBorderColor = () => {\n            switch (node.nodeType) {\n              case 'defect': return MIREA_2025_COLORS.error;\n              case 'parameter': return MIREA_2025_COLORS.primary;\n              case 'equipment': return MIREA_2025_COLORS.info;\n              case 'cause': return MIREA_2025_COLORS.warning;\n              case 'recommendation': return MIREA_2025_COLORS.success;\n              default: return MIREA_2025_COLORS.secondary;\n            }\n          };\n          \n          // Check if node is expanded\n          const isExpanded = expandedNodes.has(node.id.toString());\n          \n          return (\n            <g key={node.id}>\n              <motion.circle\n                cx={pos.x}\n                cy={pos.y}\n                r={size / 2}\n                fill={getColor()}\n                stroke={getBorderColor()}\n                strokeWidth=\"2\"\n                style={{ \n                  cursor: draggingNodeId === node.id ? 'grabbing' : 'grab', \n                  filter: `drop-shadow(0 0 10px ${getBorderColor()}80)` \n                }}\n                animate={{\n                  scale: [1, 1.1, 1],\n                  filter: [\n                    `drop-shadow(0 0 5px ${getBorderColor()}40)`,\n                    `drop-shadow(0 0 15px ${getBorderColor()}60)`,\n                    `drop-shadow(0 0 5px ${getBorderColor()}40)`,\n                  ]\n                }}\n                transition={{\n                  duration: 2,\n                  repeat: Infinity,\n                  delay: i * 0.2\n                }}\n                whileHover={{ \n                  scale: 1.3\n                }}\n                onClick={() => handleNodeClick(node)}\n                onMouseDown={(e) => handleMouseDown(node.id.toString(), e)}\n              />\n              \n              {/* Expand/Collapse indicator */}\n              <circle\n                cx={pos.x + size/2 - 8}\n                cy={pos.y - size/2 + 8}\n                r=\"8\"\n                fill={isExpanded ? MIREA_2025_COLORS.error : MIREA_2025_COLORS.success}\n                stroke=\"#FFFFFF\"\n                strokeWidth=\"1\"\n                style={{ cursor: 'pointer' }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  toggleNodeExpansion(node.id.toString());\n                }}\n              />\n              \n              <text\n                x={pos.x + size/2 - 8}\n                y={pos.y - size/2 + 12}\n                textAnchor=\"middle\"\n                fill=\"#FFFFFF\"\n                fontSize=\"10\"\n                fontWeight=\"bold\"\n                style={{ pointerEvents: 'none' }}\n              >\n                {isExpanded ? '-' : '+'}\n              </text>\n              \n              {/* Node label */}\n              <text\n                x={pos.x}\n                y={pos.y + 5}\n                textAnchor=\"middle\"\n                fill=\"#FFFFFF\"\n                fontSize={Math.max(8, 12 - nodes.length * 0.1)}\n                fontWeight=\"bold\"\n                style={{ pointerEvents: 'none', textShadow: '1px 1px 2px rgba(0,0,0,0.7)' }}\n              >\n                {node.label.substring(0, Math.max(3, Math.floor(size / 8)))}\n              </text>\n            </g>\n          );\n        })}\n      </svg>\n    );\n  };\n  \n  return (\n    <Box sx={{ position: 'relative', width: '100%', height: 500, overflow: 'hidden', borderRadius: 4, background: 'rgba(0, 0, 0, 0.2)' }}>\n      {/* Фоновый градиент */}\n      <Box\n        sx={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: `radial-gradient(circle at 30% 20%, ${alpha(MIREA_2025_COLORS.primary, 0.1)} 0%, transparent 50%),\n            radial-gradient(circle at 70% 80%, ${alpha(MIREA_2025_COLORS.secondary, 0.1)} 0%, transparent 50%)`,\n          animation: 'float 20s ease-in-out infinite',\n          '@keyframes float': {\n            '0%, 100%': { transform: 'translate(0, 0)' },\n            '50%': { transform: 'translate(20px, 20px)' }\n          }\n        }}\n      />\n\n      {/* Force-directed graph */}\n      {renderForceDirectedGraph()}\n      \n      {/* Node details panel */}\n      {renderNodeDetails()}\n      \n      {/* Legend */}\n      <Box sx={{ \n        position: 'absolute', \n        bottom: 20, \n        left: 20, \n        background: 'rgba(0, 0, 0, 0.6)', \n        borderRadius: 2, \n        p: 2,\n        border: '1px solid rgba(255, 255, 255, 0.1)'\n      }}>\n        <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.text, fontWeight: 'bold', mb: 1, display: 'block' }}>\n          Легенда узлов:\n        </Typography>\n        <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Box sx={{ width: 12, height: 12, borderRadius: '50%', background: MIREA_2025_COLORS.error }} />\n            <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary }}>Дефекты</Typography>\n          </Box>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Box sx={{ width: 12, height: 12, borderRadius: '30%', background: MIREA_2025_COLORS.primary }} />\n            <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary }}>Параметры</Typography>\n          </Box>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Box sx={{ width: 12, height: 12, borderRadius: '20%', background: MIREA_2025_COLORS.info }} />\n            <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary }}>Оборудование</Typography>\n          </Box>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Box sx={{ width: 12, height: 12, borderRadius: '20%', background: MIREA_2025_COLORS.warning }} />\n            <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary }}>Причины</Typography>\n          </Box>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Box sx={{ width: 12, height: 12, borderRadius: '20%', background: MIREA_2025_COLORS.success }} />\n            <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary }}>Рекомендации</Typography>\n          </Box>\n        </Box>\n      </Box>\n      \n      {/* Instructions */}\n      <Box sx={{ \n        position: 'absolute', \n        top: 20, \n        right: 20, \n        background: 'rgba(0, 0, 0, 0.6)', \n        borderRadius: 2, \n        p: 2,\n        border: '1px solid rgba(255, 255, 255, 0.1)',\n        maxWidth: 300\n      }}>\n        <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.text, fontWeight: 'bold', mb: 1, display: 'block' }}>\n          Управление:\n        </Typography>\n        <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary, display: 'block', mb: 0.5 }}>\n          • Клик по узлу - просмотр деталей\n        </Typography>\n        <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary, display: 'block', mb: 0.5 }}>\n          • Клик по +/- - развернуть/свернуть\n        </Typography>\n        <Typography variant=\"caption\" sx={{ color: MIREA_2025_COLORS.textSecondary, display: 'block' }}>\n          • Перетаскивание узлов для изменения расположения\n        </Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport default GraphVisualization;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}