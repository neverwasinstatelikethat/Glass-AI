# Модуль симуляции производства стекла

## Описание

Модуль симуляции представляет собой цифровой двойник производственной линии по изготовлению стекла. Он позволяет моделировать процессы производства, проводить what-if анализ и проверять гипотезы без риска для реального производства.

## Компоненты

### 1. ProductionSimulator ([production_simulator.py](production_simulator.py))

Основной симулятор производственной линии, который моделирует весь процесс производства стекла:

- **Процесс формования**: Моделирование формования стекла с учетом температуры, скорости конвейера и других параметров
- **Отжиг**: Симуляция процесса отжига для снятия внутренних напряжений
- **Контроль качества**: Автоматическая оценка качества продукции на основе физических параметров
- **Статистика производства**: Отслеживание производительности, количества брака и других метрик

#### Основные классы:
- `GlassProduct` - представление единицы продукции со всеми ее свойствами
- `ProductionParameters` - параметры производственного процесса
- `ProductionSimulator` - основной класс симулятора

### 2. ShadowModeSimulator ([shadow_mode.py](shadow_mode.py))

Симулятор параллельного моделирования, который работает рядом с реальным производством для валидации поведения цифрового двойника:

- **Параллельное моделирование**: Запуск симуляции параллельно с реальными данными
- **Сравнение с реальностью**: Сопоставление предсказанных состояний с фактическими
- **Обнаружение дрейфа модели**: Выявление отклонений поведения модели от реального процесса
- **Метрики валидации**: Расчет точности предсказаний и выявление проблем

#### Основные классы:
- `PredictionRecord` - запись о сделанном предсказании
- `ShadowModeMetrics` - метрики производительности симуляции
- `ShadowModeSimulator` - основной класс параллельного симулятора

### 3. WhatIfAnalyzer ([what_if_analyzer.py](what_if_analyzer.py))

Анализатор сценариев "что если", позволяющий тестировать изменения параметров перед их применением:

- **Анализ изменений параметров**: Оценка влияния изменения производственных параметров
- **Проверка ограничений**: Валидация предлагаемых изменений на соответствие допустимым диапазонам
- **Оценка воздействия**: Расчет влияния на качество, производительность и энергопотребление
- **Рекомендации**: Генерация рекомендаций по оптимизации параметров

#### Основные классы:
- `ParameterType` - типы параметров, которые можно изменять
- `ParameterConstraints` - ограничения для параметров
- `WhatIfScenario` - сценарий анализа "что если"
- `ImpactAnalysis` - анализ влияния изменений
- `WhatIfAnalyzer` - основной класс анализатора

## Как это работает

1. **Симуляция производства**: `ProductionSimulator` моделирует производственный процесс с заданными параметрами
2. **Параллельная валидация**: `ShadowModeSimulator` сравнивает предсказания с реальными данными
3. **Анализ сценариев**: `WhatIfAnalyzer` позволяет тестировать изменения параметров
4. **Оптимизация**: На основе анализа предлагаются рекомендации по улучшению процесса

## Использование

### Запуск симуляции

```python
from simulation.production_simulator import ProductionSimulator, ProductType, ProductionParameters

# Создание симулятора
simulator = ProductionSimulator(
    product_type=ProductType.FLAT_GLASS,
    production_params=ProductionParameters(
        forming_speed=180.0,
        production_rate=80.0
    )
)

# Запуск симуляции
simulator.start_production()

# Получение статуса
status = simulator.get_production_status()
```

### Анализ сценариев

```python
from simulation.what_if_analyzer import WhatIfAnalyzer, ParameterType

# Создание анализатора
analyzer = WhatIfAnalyzer(digital_twin)

# Анализ изменения температуры печи
impact = analyzer.analyze_single_parameter_change(
    ParameterType.FURNACE_TEMPERATURE, 
    new_value=1550.0
)
```

## Назначение

Этот модуль используется для:
1. **Обучения моделей**: Создание синтетических данных для обучения ML-моделей
2. **Тестирования гипотез**: Безопасное тестирование изменений параметров
3. **Оптимизации процессов**: Поиск оптимальных параметров производства
4. **Валидации цифрового двойника**: Проверка точности моделирования
5. **Прогнозирования**: Оценка будущего состояния производственной линии

## Связанные компоненты

- [Цифровой двойник](../digital_twin/README_RU.md) - основа для симуляции
- [Модели](../models/README_RU.md) - ML-модели, используемые в симуляции
- [Обучение с подкреплением](../reinforcement_learning/README_RU.md) - оптимизация параметров
- [Потоковая обработка](../streaming_pipeline/README_RU.md) - интеграция с реальными данными